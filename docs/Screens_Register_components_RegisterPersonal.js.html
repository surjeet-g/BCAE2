<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Screens/Register/components/RegisterPersonal.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Screens/Register/components/RegisterPersonal.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import moment from "moment";
import React, { useEffect, useRef, useState } from "react";
import { Alert, Dimensions, Image, Keyboard, Platform, ScrollView, View } from "react-native";

import Toast from "react-native-toast-message";
import { useDispatch, useSelector } from "react-redux";
import { CustomDropDown } from "../../../Components/CustomDropDown";
import { CountryPicker } from "../../../Components/react-native-country-codes-picker";
import { TextBoxWithCTAEmail } from "../../../Components/TextBoxWithCTAEmail";
import { setOtpFormData } from "../../../Redux/RegisterAction";
import { strings } from "../../../Utilities/Language/index";
import {
  excludedCountriesList,
  getPhoneNumberLength
} from "../../../Utilities/utils";

import { DatePickerModal } from 'react-native-paper-dates';
import {
  fetchRegisterFormData,
  getOtpForCheck,
  sendOtp,
  userRegister
} from "../../../Redux/RegisterDispatcher";

import get from "lodash.get";
import { Card, Text, TextInput, useTheme } from "react-native-paper";
import { ClearSpace } from "../../../Components/ClearSpace";
import { CustomButton as Button } from "../../../Components/CustomButton";
import { CustomInput } from "../../../Components/CustomInput";
import { StickyFooter } from "../../../Components/StickyFooter";
import { TextBoxWithCTA } from "../../../Components/TextBoxWithCTA";
import {
  color,
  fontSizes,
  isValidNumber,
  spacing,
  validateEmail,
  validatePassword
} from "../../../Utilities/Constants/Constant";
import { SHADOW_STYLE } from "../../../Utilities/themeConfig";
import { styles } from "../Register";
var { height, width } = Dimensions.get("screen");

export const showErrorMessage = (errMessage) => {
  if (typeof errMessage != "string") return null;
  let pattern = /Successful/i;
  let result = errMessage.match(pattern);

  if (result != null) {
    return null;
  }

  return (
    &lt;View style={{ marginTop: spacing.HEIGHT_10, flexDirection: "row" }}>
      &lt;Image
        style={styles.errorLogo}
        source={require("../../../Assets/icons/ci_error_warning.png")}
      />
      &lt;Text style={styles.errorText}>{errMessage}&lt;/Text>
    &lt;/View>
  );
};
/**
 * Register : Showing product Logo screen
 * user can able to search statement 
 * @namespace Register
 */
export const RegisterPersonal = React.memo(({ navigation }) => {
  // let navigation = useNavigation;
  const dispatch = useDispatch([
    fetchRegisterFormData,
    sendOtp,
    userRegister,
    getOtpForCheck,
  ]);

  const [isMobileOtpSend, setIsMobileOTPSend] = useState(false)
  const [isEmailOtpSend, setIsEmailOTPSend] = useState(false)

  const { colors } = useTheme();
  let registerForm = useSelector((state) => state.registerForm);

  /**
  * Convert timer in a format
  * @memberOf Register
  * @param  {number} otpTmr timer 
  * @returns {number} Formated timer data
  */
  const formatOtpTimer = (otpTmr) => {
    let minute = 0;

    let second = 0;

    let finalString = "";

    minute = parseInt(otpTmr / 60);

    second = otpTmr % 60;

    if (minute > 0) {
      finalString = minute + "m " + second + "s";
    } else {
      finalString = second + "s";
    }

    return finalString;
  };

  const [keyEnabled, setKeyboardVisible] = useState(false)
  const [currentYPosition, setCurrentYPosition] = useState(0)
  useEffect(() => {
    const keyboardDidShowListener = Keyboard.addListener(
      'keyboardDidShow',
      () => {
        if (Platform.OS === "android") {
          setKeyboardVisible(true) // or some other action
        }
      }
    );
    const keyboardDidHideListener = Keyboard.addListener(
      'keyboardDidHide',
      () => {
        if (Platform.OS === "android") {
          setKeyboardVisible(false); // or some other action
          console.log("dd:", currentYPosition, "f:", height)
          scrollRef.current?.scrollTo({
            y: currentYPosition - (height / 100) * 3,
            animated: true,
          });
        }

      }
    );

    return () => {
      keyboardDidHideListener.remove();
      keyboardDidShowListener.remove();
    };
  }, [currentYPosition]);
  const [mobileOTPDisabled, setMobileOTPDiabled] = useState(false)
  const [emailOTPDisabled, setEmailOTPDiabled] = useState(false)
  const scrollRef = useRef();

  const [dialpick, setDialPick] = useState("+673");
  const [emailOTPVerification, setEmailOTPVerification] = useState(false);
  const [mobileOTPVerifcation, setMobileOTPVerifcation] = useState(false);
  const [numberMaxLength, setNumberMaxLength] = useState(7);
  const [idType, setIdType] = useState("");
  // real
  const [firstName, setFirstName] = useState("");
  const [lastName, setLastName] = useState("");

  const [idNumber, setIdNumber] = useState("");
  const [gender, setGender] = useState("");
  const [title, setTitle] = useState("");
  const [country, setCountry] = useState("");
  const [location, setLocation] = useState("");
  const [latitude, setLatitude] = useState("");
  const [longitude, setLongitude] = useState("");
  const [mobileNo, setMobileNo] = useState("");
  const [countryCode, setCountryCode] = useState("673");
  const [otp, setOTP] = useState("");
  const [otpEmail, setEmailOTP] = useState("");
  const [email, setEmail] = useState("");
  const [street, setStreet] = useState("");
  const [state, setStateProfile] = useState("");
  const [district, setDistrict] = useState("");
  const [postcode, setPostcode] = useState("");
  const [password, setPassword] = useState("");
  const [confirmPassword, setConfirmPassword] = useState("");

  //  mock

  // const [firstName, setFirstName] = useState("vipin");
  // const [lastName, setLastName] = useState("v");
  // const [idNumber, setIdNumber] = useState("123123");
  // const [gender, setGender] = useState({ code: "NC" });
  // const [title, setTitle] = useState("MR");
  // const [country, setCountry] = useState("india");
  // const [location, setLocation] = useState(
  //   "thirssur,kerala,india,thirssur,kerala,india"
  // );
  // const [latitude, setLatitude] = useState("1233123");
  // const [longitude, setLongitude] = useState("123123");
  // const [mobileNo, setMobileNo] = useState("1231231");
  // const [countryCode, setCountryCode] = useState("673");
  // const [otp, setOTP] = useState("123123");
  // const [otpEmail, setEmailOTP] = useState("123123");
  // const [email, setEmail] = useState("vvvipinmds@gmail.com");
  // const [street, setStreet] = useState("kerala");
  // const [state, setStateProfile] = useState("kerala");
  // const [district, setDistrict] = useState("thrissur");
  // const [postcode, setPostcoonde] = useState("123123");
  // const [password, setPassword] = useState("Mock@123");
  // const [confirmPassword, setConfirmPassword] = useState("Mock@123");
  //  mockend
  const [isButtomDiable, setButtomEnableDisable] = useState(true);

  const [firstNameError, setFirstNameError] = useState("");
  const [lastNameError, setLastNameError] = useState("");

  const [idNumberError, setIdNumberError] = useState("");

  const [genderError, setgenderError] = useState("");
  const [titleError, setTitleError] = useState("");

  const [idTypeError, setIdTypeError] = useState("");
  const [numberError, setNumberError] = useState("");
  const [otpNumberError, setOtpNumberError] = useState("");

  const [emailError, setEmailError] = useState("");
  const [otpEmailError, setOtpEmailError] = useState("");

  const [otpTimer, setOtpTimer] = useState(OTP_TIMER);
  const [otpTimerEmail, setOtpTimerEmail] = useState(OTP_TIMER);
  const [isDisableSendOtp, setIsDisableSendOtp] = useState(false);
  const [isDisableSendOtpEmail, setIsDisableSendOtpEmail] = useState(false);
  const [selectedValueGender, setValueGender] = useState("");
  const [selectedValueTitle, setValueTitle] = useState("");
  const [isSelected, setSelection] = useState(false);
  const [isSelectedTerm, setSelectionTerm] = useState(false);
  const [selectedValueIdType, setValueIdType] = useState("");
  const [countryPickModel, setCountryPickModel] = useState(false);
  const [passwordError, setPasswordError] = useState("");
  const [passwordConfirmError, setConfirmPasswordError] = useState("");

  const [secureTextEntry, setsecureTextEntry] = useState(true);
  const [secureTextEntryConfim, setsecureTextEntryConfim] = useState(true);
  const [termError, setTermError] = useState("");
  const [privaceyError, setPrivaceyError] = useState("");
  const [dob, setDob] = useState("");
  const [dobError, setDobError] = useState("");
  const [open, setOpen] = useState(false);
  const [addreType, setAddrType] = useState("");
  const [hno, setHno] = useState("");
  const [buildingNo, setBuildingNo] = useState("");
  const [city, setCity] = useState("");
  const onCheckBoxClickTerm = () => {
    //console.log("onCheckBoxClickTerm====>isSelectedTerm==>"+isSelectedTerm)
    setSelectionTerm(!isSelectedTerm);

    setTermError("");
  };
  /**
 * Set address that user selected and set into inputbox 
 * @memberOf Register
 * @param  {Object} params address data 
 */
  const onPlaceChosen = (params) => {
    console.log("hitting back with ", params);
    setLatitude(params.currentLatitude);
    setLongitude(params.currentLongitude);
    setLocation(
      `${params.hno},${params.buildingName},${params.street},${params.city},${params.district},${params.state},${params.country},${params.postCode}`
    );
    setBuildingNo(params.buildingName);
    setStreet(params.street);
    setStateProfile(params.state);
    setDistrict(params.district);
    setCountry(params.country);
    setHno(params.hno);
    setPostcode(params.postCode);
    setDialPick(params.dialPick);
    setNumberMaxLength(getPhoneNumberLength(params.dialPick));
    setAddrType(params.addressType);
    setCity(params.city);
  };
  const onFirstNameChange = (textStr) => {
    const filteredText = textStr.replace(/[^\w\s]/gi, '');
    setFirstName(filteredText);
    setFirstNameError("");
    buttonEnableDiable();
  };
  // const onLocationChanged = (textStr) => {
  //   setLocation(textStr);
  //   setLocationError("");
  //   buttonEnableDiable();
  // };

  /**
 * Handle API Call for registeration 
 * @memberOf Register
 */
  const submit = async () => {

    // if (!mobileOTPVerifcation) {
    //   Toast.show({
    //     type: "bctError",
    //     text1: strings.otpErrorMsgForMobile,
    //   });
    //   return null;
    // }
    if (!emailOTPVerification) {
      Toast.show({
        type: "bctError",
        text1: strings.otpErrorMsgForEmail,
      });
      return null;
    }

    if (!validatePassword(password)) {
      setPasswordError(strings.passwordValidError);
    } else if (!validatePassword(confirmPassword)) {
      setConfirmPasswordError(strings.passwordValidError);
    } else if (password !== confirmPassword) {
      setConfirmPasswordError(strings.passwordandconfirmpasswordnotsame);
    }
    // else if (!isSelectedTerm) {

    //   setTermError(strings.termError);
    // } else if (!isSelected) {
    //   setPrivaceyError(strings.privaceyError);
    // }
    else if (idNumber === "") {
      setIdNumberError(strings.idNumberError);
    } else if (idType === "") {
      setIdTypeError(strings.idTypeError);
    } else if (gender?.code === "") {
      setgenderError(strings.genderError);
    } else if (title?.code === "") {
      setTitleError(strings.titleError);
    } else if (mobileNo.length !== numberMaxLength) {
      setNumberError(`Please enter a ${numberMaxLength} digit mobile number!!`);
    } else if (otp.trim() === "") {
      setOtpNumberError(strings.numberOtpError);
    } else if (!validateEmail(email)) {
      setEmailError(strings.emailValidError);
    } else if (otpEmail.trim() === "") {
      setOtpEmailError(strings.emailOtpError);
    } else {
      console.log("submit validation success");

      let registerObject = {
        userFamily: "UAM_MOBILE",
        userSource: "US_MOBILEAPP",
        accountType: "personal",
        //userSource:"US_MOBILEAPP",
        title: title,
        firstName: firstName,
        lastName: lastName,
        gender: gender?.code, //gender.code
        //customerNo: "",  not required for personal customer
        extNo: dialpick,
        mobileNo: mobileNo,
        emailId: email,
        birthDate: moment(dob).format("YYYY-MM-DD"),
        idType: idType?.code,
        idValue: idNumber,
        address: {
          addressType: addreType,
          // buildingName: buildingNo,
          // houseNo: hno,
          address1: `${hno},${buildingNo}`,
          address2: `${district},${state}`,
          address3: `${country},${postcode}`,
          city,
          // town: street,
          state: state,
          district: district,
          country: country,
          latitude: latitude.toString(),
          longitude: longitude.toString(),
          postcode: postcode,
        },
        password: password,
        confirmPassword: confirmPassword,
        isVerified: true,
      };
      console.log("submit validation success", registerObject);

      dispatch(
        userRegister(registerObject, "Register", (message) => {
          dispatch(setOtpFormData({}, "Register"));
          dispatch(setOtpFormData({}, "mobile"));
          dispatch(setOtpFormData({}, "mobileOtp"));
          dispatch(setOtpFormData({}, "email"));
          dispatch(setOtpFormData({}, "emailOtp"));
          navigation.navigate("RegisterSuccess", {
            name: `${firstName} ${lastName}`,
          });
        }),
        () => {
          console.log("callback for ");
        }
      );
      // });
    }
  };
  let masterReducer = useSelector((state) => state.masterdata);
  const genderList = get(masterReducer, "masterdataData.GENDER", []);
  const addreList = get(masterReducer, "masterdataData.ADDRESS_TYPE", []);
  const customerIdList = get(
    masterReducer,
    "masterdataData.CUSTOMER_ID_TYPE",
    []
  );
  //4 minute

  const timerCounter = parseFloat(get(masterReducer, 'masterdataConfig.otpExpirationDuration.email_sms', 1.5))

  const OTP_TIMER = timerCounter * 60;
  console.log("timerCounter", OTP_TIMER)
  const showAlert = (message = "") => {
    // if (
    //   !registerForm.initRegisterForm &amp;&amp;
    //   registerForm?.otpFormData?.status == "200" &amp;&amp;
    //   registerForm?.otpUsageType === "Register"
    // ) {
    //showErrorMessage(registerForm?.otpFormData?.message)
    Alert.alert("Info", message, [
      {
        text: "OK",
        onPress: () => {
          dispatch(setOtpFormData({}, "Register"));
          dispatch(setOtpFormData({}, "mobile"));
          dispatch(setOtpFormData({}, "mobileOtp"));
          dispatch(setOtpFormData({}, "email"));
          dispatch(setOtpFormData({}, "emailOtp"));
          navigation.navigate("Login", {});
        },
      },
    ]);
  };
  const showMobileErrorMessage = () => {
    return (
      &lt;View style={{ marginTop: spacing.HEIGHT_6, flexDirection: "row" }}>
        &lt;Image
          style={styles.errorLogo}
          source={require("../../../Assets/icons/ci_error_warning.png")}
        />
        &lt;Text style={styles.errorText}>{strings.otpMobileFailed}&lt;/Text>
      &lt;/View>
    );
  };

  const showEmailErrorMessage = () => {
    return (
      &lt;View style={{ marginTop: spacing.HEIGHT_6, flexDirection: "row" }}>
        &lt;Image
          style={styles.errorLogo}
          source={require("../../../Assets/icons/ci_error_warning.png")}
        />
        &lt;Text style={styles.errorText}>{strings.otpEmailFailed}&lt;/Text>
      &lt;/View>
    );
  };

  const showOtpSentMessage = () => {
    setMobileOTPDiabled(false)
    setIsDisableSendOtp(true);
    runOtpTimer(otpTimer);
  };

  const showOtpEmailSentMessage = () => {
    setEmailOTPDiabled(false)
    setIsDisableSendOtpEmail(true);
    runOtpTimerEmail(otpTimer);
  };

  /**
   * Handle Reset OTP  
   * @memberOf Register
   */
  const submitResndOTP = () => {
    if (!isValidNumber(mobileNo)) {
      setNumberError(strings.mobileValidError);
    } else {
      if (mobileNo.length !== numberMaxLength) {
        setNumberError(
          `Please enter a ${numberMaxLength} digit mobile number!!`
        );
      } else {
        if (firstName.trim() === "") {
          Toast.show({
            type: "bctError",
            text1: strings.firstNameError,
          });
          setFirstNameError(strings.firstNameError);
        } else {
          //alert("submitResndOTP");
          // const mobileNumberWIthCounty = (countryCode + mobileNo).replace(
          //   "+",
          //   ""
          // );
          //console.log("count", mobileNumberWIthCounty);
          dispatch(
            sendOtp(
              dialpick,
              mobileNo,
              firstName,
              "mobile",
              showOtpSentMessage
            )
          );
          setIsMobileOTPSend(true)
          buttonEnableDiable();
          //setIsDisableSendOtp(true);
          //runOtpTimer(otpTimer);
        }
      }
    }
  };
  const buttonEnableDiable = () => {
    // console.log("buttonEnableDiable==>"+firstName+"&lt;===>"+lastName+"&lt;===>"+gender+"&lt;===>"+location
    // +"&lt;===>"+mobileNo+"&lt;===>"+otp+"&lt;===>"+email
    // +"&lt;===>"+otpEmail+"&lt;===>"+password+"&lt;===>"+confirmPassword)
    if (
      firstName === "" ||
      lastName === "" ||
      gender === "" ||
      mobileNo === "" ||
      otp === "" ||
      email === "" ||
      otpEmail === "" ||
      idType === "" ||
      idNumber === "" ||
      location === "" ||
      password === "" ||
      dob === "" ||
      confirmPassword === ""
    ) {
      setButtomEnableDisable(true);
      //console.log("buttonEnableDiable==>1");
    } else {
      //console.log("buttonEnableDiable==>2");

      setButtomEnableDisable(false);
    }
  };
  clearTimerRef = useRef();
  const runOtpTimer = (otpTimer) => {
    clearTimerRef.current = setTimeout(() => {
      setOtpTimer(otpTimer);
      otpTimer = otpTimer - 1;
      if (otpTimer &lt; 0) {
        setIsDisableSendOtp(false);
        setOtpTimer(OTP_TIMER);
      } else {
        runOtpTimer(otpTimer);
        //alert(otpTimer);
      }
    }, 1000);
  };

  const runOtpTimerEmail = (otpTimer) => {
    clearTimerRef.current = setTimeout(() => {
      setOtpTimerEmail(otpTimer);
      otpTimer = otpTimer - 1;


      if (otpTimer &lt; 0) {
        setIsDisableSendOtpEmail(false);
        setOtpTimerEmail(OTP_TIMER);
      } else {
        runOtpTimerEmail(otpTimer);
      }
    }, 1000);
  };

  const submitConfirmMobileOTP = async () => {


    if (otp === "") {
      setOtpNumberError(strings.numberOtpError);
    } else {
      //const mobileNumberWIthCounty = (countryCode + mobileNo).replace("+", "");

      const resp = await dispatch(
        getOtpForCheck({ reference: mobileNo, otp }, "mobileOtp")
      ); // country code to be added to verify OTP
      console.log("mobile otp check", resp)



      if (resp.status) {
        setMobileOTPVerifcation(true);
        setMobileOTPDiabled(true)

      } else {
        setMobileOTPVerifcation(false);
      }
      buttonEnableDiable();
    }
  };
  //alert(JSON.stringify(Register));
  const submitConfirmEmailOTP = async () => {
    if (otpEmail === "") {
      setOtpEmailError(strings.emailOtpError);
    } else {
      const resp = await dispatch(
        getOtpForCheck({ reference: email, otp: otpEmail }, "emailOtp")
      );
      console.log("hitting", resp);
      if (resp.status) {
        setEmailOTPVerification(true);
        setEmailOTPDiabled(true)
      } else {
        setEmailOTPVerification(false);
      }
      buttonEnableDiable();
    }
  };
  const submitEmail = () => {

    if (firstName.trim() === "") {
      Toast.show({
        type: "bctError",
        text1: strings.firstNameError,
      });
      setFirstNameError(strings.firstNameError);
    } else if (!validateEmail(email)) {
      setEmailError(strings.emailValidError);
    } else {
      dispatch(sendOtp("", email, firstName, "email", showOtpEmailSentMessage));
      setIsEmailOTPSend(true)
      buttonEnableDiable();
    }
  };

  const onCheckBoxClick = () => {
    //console.log("onCheckBoxClick====>isSelected===>"+isSelected)
  };
  const onClickPasswordChange = (text) => {
    //console.log("onCheckBoxClick====>isSelected===>"+isSelected)
    setPassword(text);
    setConfirmPasswordError("");
    setPasswordError("");
    buttonEnableDiable();
  };
  const onClickConfirmPasswordChange = (text) => {
    //console.log("onCheckBoxClick====>isSelected===>"+isSelected)
    setConfirmPassword(text);

    setConfirmPasswordError("");
    buttonEnableDiable();
    if (password != "" &amp;&amp; (text != password)) {
      setConfirmPasswordError(strings.password_not_match)
    }

  };
  const clearFirstName = () => {
    setFirstName("");
    setFirstNameError(strings.firstNameError);
  };
  const locationIconClick = () => {
    navigation.navigate("AddLocation", {
      onPlaceChosen,
      fromPage: "Register",
    });
  };
  const onLastNameChange = (textStr) => {
    const filteredText = textStr.replace(/[^\w\s]/gi, '');
    setLastName(filteredText);
    setLastNameError("");
    buttonEnableDiable();
  };
  const clearLastName = () => {
    setLastName("");
    setLastNameError(strings.lastNameError);
  };

  const onGenderClick = (textStr) => {
    // console.log(textStr.description)
    setGender(textStr);
    setgenderError("");
    buttonEnableDiable();
  };

  const onIdTypeClick = (textStr) => {
    // console.log(textStr.description)
    setIdType(textStr);
    setIdTypeError("");
    buttonEnableDiable();
  };

  const onCountryClick = (textStr) => {
    setCountry(textStr.onChangeText);
    setCountryCode(textStr?.mapping?.countryCode ?? "");
    buttonEnableDiable();
  };
  const onLocationClick = (textStr) => {
    setLocation(textStr.onChangeText);
    buttonEnableDiable();
  };

  const onMobleNoChange = (textStr) => {
    setMobileNo(textStr);
    setNumberError("");
    buttonEnableDiable();
  };
  const onOTPChange = (textStr) => {
    setOTP(textStr);
    setOtpNumberError("");
    buttonEnableDiable();
  };
  const onEmailOTPChange = (textStr) => {
    setEmailOTP(textStr);
    setOtpEmailError("");
    buttonEnableDiable();
  };
  const onEmailChange = (textStr) => {
    setEmail(textStr);
    setEmailError("");
    buttonEnableDiable();
  };

  return (
    &lt;View style={{ flex: 1 }}>
      &lt;View style={{ flex: 1, padding: 12 }}>

        &lt;ScrollView nestedScrollEnabled={true}
          ref={scrollRef}
          onScroll={event => {
            setCurrentYPosition(event.nativeEvent.contentOffset.y)
          }}
        >

          &lt;Card
            style={{
              ...SHADOW_STYLE,
              padding: 12,
              // marginTop: 2,
              backgroundColor: colors.background,
              borderRadius: 16,
            }}
          >
            &lt;View style={{ marginVertical: 5 }}>
              &lt;CustomDropDown
                selectedValue={selectedValueTitle?.description}
                setValue={setTitle}
                data={[
                  { code: "Mr", description: "Mr" },
                  { code: "Mrs", description: "Mrs" },
                  { code: "Ms", description: "Ms" },
                  { code: "Miss", description: "Miss" },
                ]}
                onChangeText={(text) => {
                  setValueTitle(text);
                  buttonEnableDiable();
                }}
                value={title?.description}
                placeHolder={strings.title}
              />

              {titleError !== "" &amp;&amp; showErrorMessage(titleError)}
            &lt;/View>
            &lt;View style={{ marginTop: 10 }}>
              &lt;CustomInput
                style={{
                  backgroundColor: "transparent",
                }}
                onChangeText={(text) => onFirstNameChange(text)}
                value={firstName}
                caption={strings.first_name}
                placeHolder={strings.first_name}
                right={
                  firstName &amp;&amp; (
                    &lt;TextInput.Icon
                      onPress={clearFirstName}
                      // style={{ width: 15, height: 15 }}
                      theme={{ colors: { onSurfaceVariant: colors.gray } }}
                      icon="close"
                    />
                  )
                }
              />

              {firstNameError !== "" &amp;&amp; showErrorMessage(firstNameError)}
            &lt;/View>

            {/* Last Name */}
            &lt;View style={{ marginTop: 5 }}>
              &lt;CustomInput
                style={{
                  backgroundColor: "transparent",
                }}
                onChangeText={(text) => onLastNameChange(text)}
                value={lastName}
                placeHolder={strings.last_name}
                caption={strings.last_name}
                right={
                  lastName &amp;&amp; (
                    &lt;TextInput.Icon
                      onPress={clearLastName}
                      theme={{ colors: { onSurfaceVariant: colors.gray } }}
                      icon="close"
                    />
                  )
                }
              />

              {lastNameError !== "" &amp;&amp; showErrorMessage(lastNameError)}
            &lt;/View>
            {/* Gender */}
            &lt;View style={{ marginTop: 5 }}>
              &lt;CustomDropDown
                selectedValue={selectedValueGender}
                setValue={setValueGender}
                data={genderList}
                onChangeText={(text) => onGenderClick(text)}
                value={gender?.description}
                placeHolder={strings.gender}
              />

              {genderError !== "" &amp;&amp; showErrorMessage(genderError)}
            &lt;/View>
            &lt;DatePickerModal
              locale="en"
              mode="single"
              visible={open}
              onDismiss={() => {
                setOpen(false)
              }}
              date={dob == "" ? new Date() : new Date(dob)}
              // onConfirm={onConfirmSingle}
              onConfirm={(params) => {
                setOpen(false);
                setDob(moment(params?.date).format("YYYY-MM-DD"));
                setDobError("");
                buttonEnableDiable();
              }}
            // validRange={{
            //   startDate: new Date(2021, 1, 2),  // optional
            //   endDate: new Date(), // optional
            //   disabledDates: [new Date()] // optional
            // }}
            // onChange={} // same props as onConfirm but triggered without confirmed by user
            // saveLabel="Save" // optional
            // saveLabelDisabled={true} // optional, default is false
            // uppercase={false} // optional, default is true
            // label="Select date" // optional
            // animationType="slide" // optional, default is 'slide' on ios/android and 'none' on web
            // startYear={2000} // optional, default is 1800
            // endYear={2100} // optional, default is 2200
            //
            />
            {/* &lt;DatePicker
              modal
              mode="date"
              validRange={{ endDate: new Date() }}
              open={open}
              onCancel={() => setOpen(false)}
              date={dob == "" ? new Date() : dob}
              maximumDate={new Date()}
              onConfirm={(params) => {
                console.log("data", params);
                setOpen(false);
                setDob(params);
                setDobError("");
                buttonEnableDiable();
              }}
            /> */}
            &lt;View style={{ marginTop: 10 }}>
              &lt;CustomInput
                style={{
                  backgroundColor: "transparent",
                }}
                // onChangeText={(text) => onIDChange(text)}
                value={dob == "" ? "" : moment(dob).format("YYYY-MM-DD")}
                caption={"Date of birth"}
                onFocus={() => setOpen(true)}
                placeHolder={"Date of birth"}
                right={
                  &lt;TextInput.Icon
                    onPress={() => setOpen(true)}
                    theme={{ colors: { onSurfaceVariant: colors.primary } }}
                    icon="calendar"
                  />
                }
              />
              {dobError !== "" &amp;&amp; showErrorMessage(dobError)}
            &lt;/View>
            &lt;View style={{ marginTop: 5 }}>
              &lt;CustomDropDown
                selectedValue={selectedValueIdType}
                setValue={setValueIdType}
                data={customerIdList}
                onChangeText={(text) => onIdTypeClick(text)}
                value={gender?.description}
                placeHolder={strings.id_type}
              />

              {idTypeError !== "" &amp;&amp; showErrorMessage(idTypeError)}
            &lt;/View>

            &lt;View style={{ marginTop: 10 }}>
              &lt;CustomInput
                style={{
                  backgroundColor: "transparent",
                }}
                onChangeText={(text) => {
                  setIdNumber(text);
                  setIdNumberError("");
                  buttonEnableDiable();
                }}
                value={idNumber}
                caption={strings.id_number}
                placeHolder={strings.id_number}
                maxLength={15}
                right={
                  idNumber &amp;&amp; (
                    &lt;TextInput.Icon
                      onPress={() => {
                        setIdNumber("")
                        setIdNumberError(strings.idNumberError)
                      }}
                      theme={{ colors: { onSurfaceVariant: colors.gray } }}
                      icon="close"
                    />
                  )
                }
              />
              {idNumberError !== "" &amp;&amp; showErrorMessage(idNumberError)}
            &lt;/View>

            &lt;View style={{ marginTop: 10 }}>
              &lt;CustomInput
                multiline={true}
                numberOfLines={2}
                style={{
                  backgroundColor: "transparent",
                }}
                value={location || strings.location}
                caption={strings.location}
                placeHolder={strings.location}
                right={
                  &lt;TextInput.Icon
                    onPress={() => locationIconClick()}
                    theme={{ colors: { onSurfaceVariant: colors.primary } }}
                    icon="map"
                  />
                }
              />
            &lt;/View>
          &lt;/Card>

          {/* ID Type */}

          &lt;CountryPicker
            show={countryPickModel}
            excludedCountries={excludedCountriesList()}
            pickerButtonOnPress={(item) => {
              setDialPick(item.dial_code);
              setCountryPickModel(false);

              setNumberMaxLength(getPhoneNumberLength(item.code));
            }}
            onBackdropPress={() => setCountryPickModel(false)}
            style={{
              modal: {
                height: "65%",
              },
            }}
          />
          &lt;ClearSpace size={1} />
          &lt;Text variant="headlineSmall">Mobile Verification&lt;/Text>
          &lt;ClearSpace size={1} />
          {/* Mobile Number */}
          &lt;Card
            style={{
              ...SHADOW_STYLE,
              padding: 12,
              marginTop: 2,
              backgroundColor: colors.background,
            }}
          >
            &lt;View style={{ marginTop: 5 }}>
              &lt;TextBoxWithCTA
                onChangeText={(text) => onMobleNoChange(text)}
                value={mobileNo}
                placeHolder={strings.mobile_number}
                isResendOTP={true}
                loader={
                  registerForm?.initOtpForm &amp;&amp;
                    registerForm?.otpUsageType === "mobile"
                    ? true
                    : false
                }
                onPressOnCountyCode={() => setCountryPickModel(true)}
                countryCode={dialpick}
                label={isMobileOtpSend ? "RESEND OTP" : strings.send_otp}
                onPress={submitResndOTP}
                bgColor={color.BCAE_PRIMARY}
                keyboardType={"numeric"}
                isDisableButton={isDisableSendOtp}
                maxLength={numberMaxLength}
                btnTextPro={{
                  color: color.WHITE,
                  fontSize: fontSizes.FONT_12,
                  fontWeight: "400",
                  // lineHeight: spacing.HEIGHT_14,
                }}
              />
              {!mobileOTPDisabled &amp;&amp; otpTimer > 0 &amp;&amp; otpTimer &lt; OTP_TIMER &amp;&amp; (
                &lt;View style={{ alignItems: "flex-end", marginTop: 10 }}>
                  &lt;Text style={styles.errorText}>
                    {strings.otp_sent} {formatOtpTimer(otpTimer)}
                  &lt;/Text>
                &lt;/View>
              )}
              {!registerForm.initOtpForm &amp;&amp;
                registerForm?.isOtpFormError &amp;&amp;
                registerForm?.otpFormDataForMobile?.errorCode > 200 &amp;&amp;
                registerForm?.otpUsageType === "mobile" &amp;&amp;
                showErrorMessage(registerForm?.otpFormDataForMobile?.message)}
              {numberError !== "" &amp;&amp; showErrorMessage(numberError)}
            &lt;/View>
            {/* OTP */}
            &lt;View style={{ marginTop: 5 }}>
              &lt;TextBoxWithCTA
                onChangeText={(text) => onOTPChange(text)}
                value={otp}
                placeHolder={strings.mobile_otp}
                isConfirmOTP={true}
                label={strings.confirm_otp}
                loader={
                  registerForm?.initOtpForm &amp;&amp;
                    registerForm?.otpUsageType === "mobileOtp"
                    ? true
                    : false
                }
                correctOtp={mobileOTPVerifcation}
                onPress={submitConfirmMobileOTP}
                bgColor={color.BCAE_PRIMARY}
                keyboardType={"numeric"}
                btnTextPro={{
                  color: color.WHITE,
                  fontSize: fontSizes.FONT_12,
                  fontWeight: "400",
                  // lineHeight: spacing.HEIGHT_14,
                }}
              />
              {otp !== "" &amp;&amp;
                !registerForm.initOtpForm &amp;&amp;
                registerForm?.otpFormDataForMobile?.data?.otp !== undefined &amp;&amp;
                registerForm?.otpFormDataForMobile?.data?.otp !== otp &amp;&amp;
                registerForm?.otpUsageType === "mobileOtp" &amp;&amp;
                showMobileErrorMessage()}

              {otp !== "" &amp;&amp;
                !registerForm.initOtpForm &amp;&amp;
                registerForm?.otpFormDataForMobile?.data?.data === null &amp;&amp;
                registerForm?.otpUsageType === "mobileOtp" &amp;&amp;
                showMobileErrorMessage()}

              {otpNumberError !== "" &amp;&amp; showErrorMessage(otpNumberError)}
            &lt;/View>
          &lt;/Card>
          &lt;ClearSpace size={1} />
          &lt;Text variant="headlineSmall">Email Verification&lt;/Text>
          &lt;ClearSpace size={1} />
          {/* Mobile Number */}
          &lt;Card
            style={{
              ...SHADOW_STYLE,
              padding: 12,
              marginTop: 2,
              backgroundColor: colors.background,
            }}
          >
            {/* Email */}
            &lt;View style={{ marginTop: 5 }}>
              &lt;TextBoxWithCTAEmail
                onChangeText={(text) => onEmailChange(text)}
                value={email}
                placeHolder={strings.email}
                isEmail={true}
                loader={
                  registerForm?.initOtpForm &amp;&amp;
                    registerForm?.otpUsageType === "email"
                    ? true
                    : false
                }

                isDisableButton={isDisableSendOtpEmail}
                label={isEmailOtpSend ? "RESEND OTP" : "SEND OTP"}
                onPress={submitEmail}
                bgColor={color.BCAE_PRIMARY}
                btnTextPro={{
                  color: color.WHITE,
                  fontSize: fontSizes.FONT_12,
                  fontWeight: "400",
                  // lineHeight: spacing.HEIGHT_14,
                }}
              />
              {!emailOTPDisabled &amp;&amp; otpTimerEmail > 0 &amp;&amp; otpTimerEmail &lt; OTP_TIMER &amp;&amp; (
                &lt;View style={{ alignItems: "flex-end", marginTop: 10 }}>
                  &lt;Text style={styles.errorText}>
                    {strings.otp_sent} {formatOtpTimer(otpTimerEmail)}
                  &lt;/Text>
                &lt;/View>
              )}
              {!registerForm.initOtpForm &amp;&amp;
                registerForm?.isOtpFormError &amp;&amp;
                registerForm?.otpFormDataForEmail?.errorCode > 200 &amp;&amp;
                registerForm?.otpUsageType === "email" &amp;&amp;
                showErrorMessage(registerForm?.otpFormDataForEmail?.message)}

              {emailError !== "" &amp;&amp; showErrorMessage(emailError)}
            &lt;/View>

            {/* OTP */}

            &lt;View style={{ marginTop: 5 }}>
              &lt;TextBoxWithCTA
                onChangeText={(text) => onEmailOTPChange(text)}
                value={otpEmail}
                placeHolder={strings.email_otp}
                isConfirmOTP={true}
                label={"CONFIRM OTP"}
                loader={
                  registerForm?.initOtpForm &amp;&amp;
                    registerForm?.otpUsageType === "emailOtp"
                    ? true
                    : false
                }
                correctOtp={emailOTPVerification}
                onPress={submitConfirmEmailOTP}
                bgColor={color.BCAE_PRIMARY}
                keyboardType={"numeric"}
                btnTextPro={{
                  color: color.WHITE,
                  fontSize: fontSizes.FONT_12,
                  fontWeight: "400",
                  // lineHeight: spacing.HEIGHT_14,
                }}
              />
              {otpEmail !== "" &amp;&amp;
                !registerForm.initOtpForm &amp;&amp;
                registerForm?.otpFormDataForEmail?.data?.otp !== undefined &amp;&amp;
                registerForm?.otpFormDataForEmail?.data?.otp !== otpEmail &amp;&amp;
                registerForm?.otpUsageType === "emailOtp" &amp;&amp;
                showEmailErrorMessage()}

              {otpEmail !== "" &amp;&amp;
                !registerForm.initOtpForm &amp;&amp;
                registerForm?.otpFormDataForEmail?.data?.data === null &amp;&amp;
                registerForm?.otpUsageType === "emailOtp" &amp;&amp;
                showEmailErrorMessage()}

              {otpEmailError !== "" &amp;&amp; showErrorMessage(otpEmailError)}
            &lt;/View>
          &lt;/Card>
          &lt;ClearSpace size={1} />
          &lt;Text variant="headlineSmall">Set password&lt;/Text>
          &lt;ClearSpace size={1} />
          {/* Mobile Number */}
          &lt;Card
            style={{
              ...SHADOW_STYLE,
              padding: 12,
              marginTop: 2,
              backgroundColor: colors.background,
            }}
          >
            &lt;View style={{ marginTop: 5 }}>
              &lt;CustomInput
                value={password}
                caption={strings.password}
                placeHolder={strings.password}
                onChangeText={onClickPasswordChange}
                secureTextEntry={secureTextEntry}
                right={
                  password &amp;&amp; (
                    &lt;TextInput.Icon
                      onPress={() => setsecureTextEntry(!secureTextEntry)}
                      style={{ width: 23, height: 23 }}
                      icon={
                        secureTextEntry
                          ? require("../../../Assets/icons/ic_password_show.png")
                          : require("../../../Assets/icons/ic_password_hide.png")
                      }
                    />
                  )
                }
              />

              {/* {showErrorMessage("sds")} */}
              {passwordError !== "" &amp;&amp; showErrorMessage(passwordError)}
            &lt;/View>
            &lt;View style={{ marginBottom: spacing.HEIGHT_20 }}>
              &lt;CustomInput
                value={confirmPassword}
                caption={strings.confirmPassword}
                placeHolder={strings.confirmPassword}
                onChangeText={onClickConfirmPasswordChange}
                secureTextEntry={secureTextEntryConfim}
                right={
                  confirmPassword &amp;&amp; (
                    &lt;TextInput.Icon
                      onPress={() =>
                        setsecureTextEntryConfim(!secureTextEntryConfim)
                      }
                      style={{ width: 23, height: 23 }}
                      icon={
                        secureTextEntryConfim
                          ? require("../../../Assets/icons/ic_password_show.png")
                          : require("../../../Assets/icons/ic_password_hide.png")
                      }
                    />
                  )
                }
              />

              {passwordConfirmError !== "" &amp;&amp;
                showErrorMessage(passwordConfirmError)}
            &lt;/View>
          &lt;/Card>
        &lt;/ScrollView>
      &lt;/View>
      {!keyEnabled &amp;&amp;
        &lt;StickyFooter>
          &lt;>
            &lt;View>
              &lt;Button
                label={strings.register}
                isDisabled={isButtomDiable}
                onPress={submit}
                loading={
                  registerForm?.initOtpForm
                    ? registerForm?.otpUsageType === "Register"
                    : false
                }
                mode="contained"
              />
            &lt;/View>
            &lt;Text
              style={{
                color: "#393939",
                fontSize: fontSizes.FONT_14,
                textAlign: "center",
                fontWeight: 400,
                marginTop: 10,
              }}
            >
              By continuing, I accept and agree to Dtworks
            &lt;/Text>
            &lt;View style={{ flexDirection: "row", justifyContent: "center" }}>
              &lt;Text
                style={{
                  fontSize: fontSizes.FONT_14,
                  textAlign: "center",
                  fontWeight: 600,
                  color: "#4B3694",
                  marginTop: 5,
                }}
                onPress={
                  () => navigation.navigate("TermConidtion")
                  // navigation.navigate("ShowWebPage", {
                  //   fromLogin: true,
                  //   title: "Privacy Policy",
                  //   url: DEBUG_BUILD ? STAGE_PRIVACY : PROD_PRIVACY,
                  // })
                }
              >
                Terms &amp; Conditions of Use
              &lt;/Text>
              &lt;Text
                style={{
                  fontSize: fontSizes.FONT_14,
                  textAlign: "center",
                  fontWeight: 600,
                  color: "#000000",
                  marginTop: 5,
                }}
              >
                {" "}
                &amp;{" "}
              &lt;/Text>
              &lt;Text
                style={{
                  fontSize: fontSizes.FONT_14,
                  textAlign: "center",
                  fontWeight: 600,
                  color: "#4B3694",
                  marginTop: 5,
                }}
                onPress={() => alert("Navigate to Privacy Policy")}
              >
                Privacy Policy
              &lt;/Text>
            &lt;/View>
            &lt;Text
              style={{
                color: "#393939",
                fontSize: fontSizes.FONT_12,
                textAlign: "center",
                fontWeight: 400,
                marginTop: 10,
              }}
            >
              Â© {new Date().getFullYear()} Dtworks. All rights reserved.
            &lt;/Text>
          &lt;/>
        &lt;/StickyFooter>
      }
    &lt;/View>
  );
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="CustomerOnBoarding.html">CustomerOnBoarding</a></li><li><a href="EditProfile.html">EditProfile</a></li><li><a href="ForgotPassword.html">ForgotPassword</a></li><li><a href="Interaction.html">Interaction</a></li><li><a href="Login.html">Login</a></li><li><a href="Register.html">Register</a></li><li><a href="Splash.html">Splash</a></li><li><a href="ViewProfile.html">ViewProfile</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CheckGroupbox">CheckGroupbox</a></li><li><a href="global.html#CustomActivityIndicator">CustomActivityIndicator</a></li><li><a href="global.html#CustomButton">CustomButton</a></li><li><a href="global.html#CustomDropDown">CustomDropDown</a></li><li><a href="global.html#CustomDropDownFullWidth">CustomDropDownFullWidth</a></li><li><a href="global.html#CustomErrorText">CustomErrorText</a></li><li><a href="global.html#CustomInput">CustomInput</a></li><li><a href="global.html#FooterModel">FooterModel</a></li><li><a href="global.html#ImagePicker">ImagePicker</a></li><li><a href="global.html#ShareDoc">ShareDoc</a></li><li><a href="global.html#StickyFooter">StickyFooter</a></li><li><a href="global.html#TextBoxWithCTA">TextBoxWithCTA</a></li><li><a href="global.html#TextBoxWithCTAEmail">TextBoxWithCTAEmail</a></li><li><a href="global.html#ToastTemplete">ToastTemplete</a></li><li><a href="global.html#ToggleButton">ToggleButton</a></li><li><a href="global.html#downloadFile">downloadFile</a></li><li><a href="global.html#getCustomerID">getCustomerID</a></li><li><a href="global.html#getCustomerUUID">getCustomerUUID</a></li><li><a href="global.html#getFcmDeviceId">getFcmDeviceId</a></li><li><a href="global.html#getUserId">getUserId</a></li><li><a href="global.html#getUserType">getUserType</a></li><li><a href="global.html#notificationListener">notificationListener</a></li><li><a href="global.html#permission">permission</a></li><li><a href="global.html#requestUserPermission">requestUserPermission</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Jul 27 2023 10:23:59 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
