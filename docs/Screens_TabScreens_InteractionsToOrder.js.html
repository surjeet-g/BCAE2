<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Screens/TabScreens/InteractionsToOrder.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Screens/TabScreens/InteractionsToOrder.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useLayoutEffect, useMemo, useState } from "react";

import {
  Dimensions,
  FlatList,
  Image,
  ImageBackground,
  Keyboard, Pressable,
  ScrollView,
  StyleSheet, Switch, TextInput,
  View
} from "react-native";

import { Chip, List, Text, useTheme } from "react-native-paper";
import Toast from 'react-native-toast-message';
import Icon from "react-native-vector-icons/MaterialCommunityIcons";

import { useDispatch, useSelector } from "react-redux";
import { CustomButton } from "../../Components/CustomButton";
import { styles as modalStyle } from "../../Components/InteractionSuccess";
import {
  color,
  DEFAULT_PROFILE_IMAGE,
  fontSizes,
  INPUT_TYPE,
  spacing
} from "../../Utilities/Constants/Constant";

import { strings } from "../../Utilities/Language";
import { CustomDropDownFullWidth } from "./../../Components/CustomDropDownFullWidth";
import { CustomInput } from "./../../Components/CustomInput";
var { height, width } = Dimensions.get("screen");

import { getKnowledgeSearchData } from "../../Redux/KnowledgeSearchDispatcher.js";

import { userNavigationIcon } from '../../Components/UserSearch';
import {
  setInteractionFormField,
  setInteractionReset
} from "../../Redux/InteractionAction";
import {
  addInteractionAction,
  fetchInteractionAction,
  updateInteractionAction
} from "../../Redux/InteractionDispatcher";

import get from "lodash.get";
import { ClearSpace } from "../../Components/ClearSpace";
import { FooterModel } from "../../Components/FooterModel";
import { ImagePicker } from "../../Components/ImagePicker";
import { InteractionFailed } from "../../Components/InteractionFailed";
import { InteractionSuccess } from "../../Components/InteractionSuccess";
import LoadingAnimation from "../../Components/LoadingAnimation";

import { RenderUserSelectResult } from "../../Components/UserSearch";
import { STACK_INTERACTION_DETAILS } from "../../Navigation/MyStack";
import { resetKnowSearch } from "../../Redux/KnowledgeSearchAction";
import {
  getMasterData,
  MASTER_DATA_CONSTANT
} from "../../Redux/masterDataDispatcher";
import { setProfileReset, setUserSearch } from "../../Redux/ProfileAction";
import { fetchMyProfileData, fetchSavedProfileDataByUser, seachCustomers } from "../../Redux/ProfileDispatcher";
import { commonStyle } from "../../Utilities/Style/commonStyle";
import { navBar } from "../../Utilities/Style/navBar";
import theme from "../../Utilities/themeConfig";
import { getCustomerUUID, USERTYPE } from "../../Utilities/UserManagement/userInfo";
import { handleMultipleContact } from "../../Utilities/utils";
import { showErrorMessage } from "../Register/components/RegisterPersonal";

import { CheckGroupbox } from "../../Components/CheckGroupbox";
import { getAppoinmentsData } from "../../Redux/InteractionDispatcher";
import { endPoints } from '../../Utilities/API/ApiConstants';
import { APICall } from "../CreateCustomer/util";
import AppointmentPop from "./Component/Interaction/AppoinmentPop";
import { HandleResolution } from "./Component/Interaction/Resolution";

export const typeOfAccrodin = {
  category: { value: "category", title: "Top 10 Category" },
  frequently: { value: "frequently", title: "Most frequently interaction" },
  rencently: { value: "rencently", title: "Recently inteaction" },
  searchbox: { value: "searchbox", title: "Seach input" },
  productChoose: { value: "productChoose", title: "Select Product" },
  knowlegde: { value: "knowlegde", title: "Select Service" },
  resolved: { value: "Resolved", title: "Resolution Corner" },
  workflow: { value: "workflow", title: "workflow Corner" },
};
const INTELIGENCE_STATUS = {
  CREATE_INTERACTION: "CREATE_INTERACTION",
  CREATE_INTERACTION_AUTO: "CREATE_INTERACTION_AUTO",
  PRODUCT_WITH_MULTIPLE_ITEM: "PRODUCT_WITH_MULTIPLE_ITEM",
  PRODUCT_WITH_SINGLE_ITEM: "PRODUCT_WITH_SINGLE_ITEM",
  RESOVLED: "RESOLVED"
}
/**
 * Customer/User can able to create their interactions and also provides smart assistance.
 * user can able to search statement 
 * @namespace Interaction  
 */
const InteractionsToOrder = ({ route, navigation }) => {
  const [appoinmentFormData, setAppoinmentFormData] = useState()
  //to do empty
  // const [createInteractionType, setCreateInteractionType] = useState("")
  const [createInteractionType, setCreateInteractionType] = useState(INTELIGENCE_STATUS.RESOVLED)
  // const [activeChatBotSec, setactiveChatBot] = useState("");
  const [activeChatBotSec, setactiveChatBot] = useState(typeOfAccrodin.resolved.title);
  const [activeService, setService] = useState("");
  const [isEnabledsmartAssist, setSmartAssistance] = useState(true)
  //need enable screen loader
  const [loader, setLoader] = useState(true);
  //attachment
  const [fileAttachments, setFileAttachments] = useState([]);

  const [resultLoader, setresultLoader] = useState(false);
  //to store active interaction object
  const [activeInteraction, setActiveInteraction] = useState("");
  //auto suggestion drop box vi
  const [autosuggestionlist, setautoSuggestionList] = useState(false);
  //for disble more section while search input box vissible
  const [searchStandAloneModal, setsearchStandaloneModel] = useState(false);
  const { colors, fonts, roundness } = useTheme();
  //bottom model enble or not
  const [openBottomModal, setOpenBottomModal] = useState(true);
  const [openBottomModalChatBoard, setOpenBottomModalChatBot] = useState(false);

  const [knowledgeSearchText, setKnowledgeSearchText] = useState("");
  //attachment
  const [attachmentModalVisible, setAttachmentModalVisible] = useState(false);

  const [bottomBarTitle, setBottombartitle] = useState("");

  const interactionResponseScreen = {
    SUCCESS: "SUCCESS",
    FAILED: "FAILED",
    EMPTY_CUSTOMER: "EMPTY_CUSTOMER",
    NONE: "NONE",
  };
  const [enableSuccessScreen, setEnableSuccessScreen] = useState(
    interactionResponseScreen.NONE
  );


  const [modelProfileServiceModel, setProfileSeriveModal] = useState(false);
  const [intereactionAddResponse, setInteractionResponse] = useState({});
  const [appoimentPopUp, setAppoinmentPopup] = useState(false)
  const [requestStatementHistory, setRequestStatementHistory] = useState([]);
  const [isSolutionFound, setSolutionFound] = useState(false);
  const [activeState, setActiveState] = useState({})
  const { params = {} } = route
  const { userTypeParams = USERTYPE.CUSTOMER } = params
  const [userType, setUserType] = useState(userTypeParams);
  let interactionRedux = useSelector((state) => state.interaction);
  let knowledgeSearchStore = useSelector((state) => state.knowledgeSearch);
  //console.log("usertype", userType)
  const [userSeachEnable, setUserSeachEnable] = useState(userType == USERTYPE.USER);
  /**
  * Reset state values. This will hanlde reset the state values 
  * @memberOf Interaction
  */
  const resetStateData = (exclude = "") => {
    if (exclude != "setInteractionResponse") {
      setInteractionResponse({});
    }
    setAppoinmentFormData({})
    // setUserType("");
    // setService("")
    setCreateInteractionType("")
    setSolutionFound(false);
    setRequestStatementHistory([]);
    setProfileSeriveModal(false);
    setEnableSuccessScreen(interactionResponseScreen.NONE);
    setFileAttachments([]);
    setautoSuggestionList(true);
    setsearchStandaloneModel(true);
    setKnowledgeSearchText("");
    setOpenBottomModal(false);
    setBottombartitle("");
  };

  const headerRightForNav = () => {
    return (
      &lt;View style={navBar.navRightCon}>
        &lt;Pressable
          onPress={() => setOpenBottomModal(true)}
          style={{ ...navBar.roundIcon, backgroundColor: "#D9D9D9" }}
        >
          &lt;Icon name="plus" size={19} color={colors.inverseSecondary} />
        &lt;/Pressable>
      &lt;/View>
    );
  };

  useLayoutEffect(() => {
    navigation.setOptions({
      headerRight: headerRightForNav,
    });
  }, []);

  /**
  * Reset Reducer data this function handles exception error of old data
  * @memberOf Interaction
  */
  const resetReducerNdState = (params = "") => {
    resetStateData(params);
    dispatchInteraction(setInteractionReset());
    dispatchInteraction(resetKnowSearch());
  };

  const masterDispatch = useDispatch([getMasterData]);
  const profileDispatch = useDispatch([
    fetchMyProfileData,
    seachCustomers,
    setUserSearch,
    fetchSavedProfileDataByUser,
    setProfileReset,
  ]);

  const dispatchInteraction = useDispatch([
    setInteractionReset,
    fetchInteractionAction,
    updateInteractionAction,
    addInteractionAction,
    resetKnowSearch,
    getAppoinmentsData
  ]);

  useEffect(() => {
    const willFocusSubscription = navigation.addListener("focus", () => {
      resetReducerNdState();
    });
    return willFocusSubscription;
  }, []);

  const knowledgeSearchDispatch = useDispatch([getKnowledgeSearchData]);
  const { profileReducer, masterReducer, interactionReducer } = useSelector(
    (state) => {
      return {
        profileReducer: state.profile,
        masterReducer: state.masterdata,
        interactionReducer: state.interaction,
      };
    }
  );
  //handle customer empty case
  // useEffect(() => {
  // if (profileReducer.IsSearchEmpty) {
  // setTimeout(() => {
  //todo
  // navigation.navigate(STACK_CREATE_CUSTOMER)
  // }, 3000)
  // }
  // }, [profileReducer.IsSearchEmpty])




  useEffect(() => {
    /**
    * Fetch API Data : Fetch master data and profile  for interaction screen
    * @memberOf Interaction

    */
    async function fetchData() {
      const {
        SERVICE_TYPE,
        INTXN_TYPE,
        PRIORITY,
        CONTACT_TYPE,
        INTXN_STATEMENT,
        CONTACT_PREFERENCE,
        INTXN_CAUSE,
        PROBLEM_CAUSE,
        PROD_SUB_TYPE,
        INTXN_CATEGORY,
        LOCATION,
        TICKET_CHANNEL,
        APPOINT_TYPE
      } = MASTER_DATA_CONSTANT;
      //set service
      //to get data from api

      //  await dispatchInteraction(fetchInteractionAction(true));
      profileDispatch(fetchMyProfileData(navigation));
      setLoader(false);
      // master only invoke load
      masterDispatch(
        getMasterData(
          `${INTXN_TYPE},${SERVICE_TYPE},${INTXN_CAUSE},${CONTACT_TYPE},${PRIORITY},${PROD_SUB_TYPE},${INTXN_CATEGORY},${APPOINT_TYPE},${TICKET_CHANNEL},${LOCATION},${CONTACT_PREFERENCE}`
        )
      );


    }

    fetchData();
  }, []);

  const [serviceList, setServiceList] = useState([])

  useEffect(() => {
    async function fetchMyAPI() {
      const customerUUID = await getCustomerUUID()
      const res = await APICall(`${endPoints.SERVICE_LIST}`, 'POST', { customerUuid: customerUUID.toString() });
      const serviceList = get(res, 'response.data', [])
      //console.log("servicelist", serviceList, )
      if (serviceList.length > 0) {
        console.log("",)
        const parsedata = serviceList.map(item => {

          return { description: item.serviceName, code: item.serviceNo }
        });
        setServiceList(parsedata)
        setService({
          productNo: get(serviceList, '[0].productDetails[0].productNo', ""),
          code: parsedata[0].code,
          description: parsedata[0].description,
        });
      }
    }

    fetchMyAPI();

  }, []);

  const [interactionList, setInteractionList] = useState([])
  const [priorityList, setPriorityList] = useState([])
  const [problemList, setProblemList] = useState([])

  const [serviceTypelist, setServiceTypelist] = useState([])
  const [serviceCategoryList, setServiceCategoryList] = useState([])
  const [interactionCategoryList, setInteractionCategoryList] = useState([])
  const [contactTypeList, setContactTypeList] = useState([])
  const [locationList, setLocationList] = useState([])
  const [appointList, setAppoimentList] = useState([])
  const [SearchModelisOpen, setSearchOpen] = useState(true)

  useEffect(() => {
    console.log("master data", masterReducer)
    setInteractionList(get(masterReducer, "masterdataData.INTXN_TYPE", []))
    setPriorityList(get(masterReducer, "masterdataData.PRIORITY", []))
    setProblemList(get(masterReducer, "masterdataData.INTXN_CAUSE", []))
    setServiceTypelist(get(masterReducer, "masterdataData.SERVICE_TYPE", []));
    setServiceCategoryList(get(masterReducer, "masterdataData.PROD_SUB_TYPE", []))
    setInteractionCategoryList(get(
      masterReducer,
      "masterdataData.INTXN_CATEGORY",
      []
    ))
    setAppoimentList(get(masterReducer, "masterdataData.APPOINT_TYPE", []))
    setLocationList(get(masterReducer, "masterdataData.LOCATION", []))
    setContactTypeList(get(masterReducer, "masterdataData.CONTACT_PREFERENCE", []))
  }, [masterReducer])

  const resetCreateInterationForm = () => {
    const data = { code: "", description: "" }
    setDropDownFormField("interactionType", data);
    setDropDownFormField("interactionCategory", data);
    setDropDownFormField("serviceCategory", data);
    setDropDownFormField("serviceType", data);
    setDropDownFormField("priorityCode", data);

  }
  useLayoutEffect(() => {
    resetCreateInterationForm()
  }, [])


  let customerPic =
    get(profileReducer, "savedProfileData.customerPhoto", null) ??
    DEFAULT_PROFILE_IMAGE;

  if (customerPic == "") customerPic = DEFAULT_PROFILE_IMAGE

  console.log("customer picture 1", customerPic, profileReducer)
  const addresss = get(profileReducer, "savedProfileData.customerAddress", []);

  const resetStateAfterSearchClicked = () => {
    //search result panal

    setKnowledgeSearchText("");
    setautoSuggestionList(false);
    //search box end
  };

  /**
   * Statement search and listout statements
   * @memberOf Interaction
   * @param  {string} text search string
   * @returns {JSX} Return JSX of
   */

  const onChangeKnowledgeSearchText = async (text) => {

    setKnowledgeSearchText(text);

    if (text.length > 0) {
      // setresultLoader(true)
      await knowledgeSearchDispatch(
        getKnowledgeSearchData(text, activeService?.code)
      );
      //enable list show
      setautoSuggestionList(true);
      // setresultLoader(false)
    }
  };


  /**
  * Handle the knowledge search API response
  * @memberOf Interaction
  * @param  {Object} apiRespData Knowledge serach API response data
  * @param  {string} actionType what kind of response is received from API
  * @returns {JSX} Return JSX of
  */
  const handleInteligenceResponse = async (apiRespData, item = {}, actionType = "auto_resolution") => {
    try {
      const debugg = true
      if (debugg) console.log('handleInteligenceResponse: parms resp', apiRespData, "item", item)
      const isCreateInteraction = false
      if (debugg) console.log('handleInteligenceResponse :isCreateInteraction api response', isCreateInteraction)
      if (debugg) console.log('handleInteligenceResponse : actionType', actionType)
      if (actionType == "noservive") {
        Toast.show({
          type: "bctError",
          text1: "No Resolution Found",
        });
        return;
      }
      //interaction creation part  
      if (actionType == "auto_resolution") {
        await setBottombartitle(typeOfAccrodin.resolved.title);
        await setCreateInteractionType(INTELIGENCE_STATUS.RESOVLED)
        setactiveChatBot(typeOfAccrodin.resolved)
        setOpenBottomModalChatBot(true)
        return null
      }
      if (isCreateInteraction) {
        //todo popup
        if (debugg) console.log('handleInteligenceResponse : crate interaction if condition')

        const status = presetInteractionFormData(item)
        if (debugg) console.log('handleInteligenceResponse : interactionDataToCreateInt func response', status)

        if (status) {
          //set title for bottom sheet
          await setBottombartitle("Create Interaction")
          //set active bototm sheet section
          await setCreateInteractionType(INTELIGENCE_STATUS.CREATE_INTERACTION_AUTO)
          //open bottom sheet section
          await setOpenBottomModal(true)
          console.log('success',)
          return true
        }
        else {
          console.log('failed',)
        }
        return 1
      }
      else {
        if (debugg) console.log('handleInteligenceResponse : not create interaction else condition')

        const resolutionList = get(apiRespData, 'resolutionAction.data', [])
        const solutionCount = resolutionList.length
        if (solutionCount == 0) {

          Toast.show({
            type: "bctError",
            text1: "//TODO chck message No Resolution",
          });
          setOpenBottomModalChatBot(false)

        }
        if (solutionCount == 1) {
          if (debugg) console.log('handleInteligenceResponse : one  solution')

          //directly navigate to corresponding order or product with payload [0]
        }
        else {
          if (debugg) console.log('handleInteligenceResponse : multiple solution  solution')
          await setCreateInteractionType(INTELIGENCE_STATUS.PRODUCT_WITH_MULTIPLE_ITEM)
          setactiveChatBot(typeOfAccrodin.productChoose)
          await setBottombartitle(typeOfAccrodin.productChoose.title);
          setOpenBottomModalChatBot(true)
          //to do bottom list item 
        }
        return true

      }
    } catch (error) {
      console.log('error on handleInteligenceResponse', error)
      return false
    }
  }
  const searchWordCustomiz = (text) => {
    try {
      if (text.length == 0) return text
      if (knowledgeSearchText == "") return text
      const searchIndx = text.toLocaleLowerCase().search(knowledgeSearchText.toLocaleLowerCase())
      console.log("search index", searchIndx)
      if (searchIndx == -1) return text
      let finalData = []
      const len = knowledgeSearchText.length
      const sliceText = text.slice(searchIndx, searchIndx + len)
      const arrayRange = Array.from({ length: len }, (x, i) => i + searchIndx);
      console.log("arr", arrayRange)
      const largeIdx = Math.max.apply(0, arrayRange)
      console.log("larget", largeIdx)

      const word = text.split("")
      word.map((item, idx) => {
        if (arrayRange.includes(idx)) {
          if (idx == largeIdx) {
            finalData.push(&lt;Text style={{ color: 'red' }}>{sliceText}&lt;/Text>)
          }
        }
        else {
          finalData.push(item)

        }
      })
      console.log("data", finalData)
      return finalData
    } catch (error) {
      console.log("erre", error)
      return text
    }

  }
  const RenderSearchResult = () => {
    if (!autosuggestionlist) return null;
    const result = get(knowledgeSearchStore, "knowledgeSearchData", []);

    if (result.length == 0) {
      return (
        &lt;View
          style={{
            marginTop: 20,
            flexDirection: "row",
            backgroundColor: "#fff",
            height: 50,
            borderRadius: 5,
            padding: 4,
            justifyContent: "center",
            alignItems: "center",
          }}
        >
          &lt;Text style={styles.input}>{strings.no_solution}&lt;/Text>
          &lt;Image source={require("../../Assets/icons/no_data.png")} />
        &lt;/View>
      );
    } else {
      return (
        &lt;FlatList
          contentContainerStyle={{ height: 500 }}
          data={result}
          renderItem={({ item }) => {
            return (
              &lt;List.Item
                title={() => {
                  return (&lt;Text>{searchWordCustomiz(item?.requestStatement)}&lt;/Text>)
                }}
                titleStyle={{
                  fontSize: 10,
                  padding: 0,
                  margin: 0,
                }}
                style={{
                  justifyContent: "center",
                  alignItems: "center",
                  backgroundColor: "#fff",
                  // height: 40,
                  borderBottomColor: colors.gray,
                  borderBottomWidth: 0.5,
                  paddingHorizontal: 4,
                  // borderRadius: 3,
                }}
                onPress={async () => {
                  setsearchStandaloneModel(true)
                  setKnowledgeSearchText(false);

                  //open form model
                  setautoSuggestionList(false);
                  Keyboard.dismiss();
                  setKnowledgeSearchText(item?.requestStatement);
                  setActiveState({
                    requestId: item.requestId,
                    requestStatement: item.requestStatement
                  })
                  //check if smart assistance not enable then going this normal way
                  if (!isEnabledsmartAssist) {
                    presetInteractionFormData(item)
                    setBottombartitle("Create Interaction")

                    setautoSuggestionList(false);
                    setOpenBottomModal(true)
                    return;
                  }
                  console.log("intreaction data", item)
                  presetInteractionFormData(item)

                  //auto and clear search text
                  setautoSuggestionList(false);
                  const activeData = get(profileReducer, 'userSelectedProfileDetails.customerUuid', '') == '' ? "savedProfileData" : "userSelectedProfileDetails";

                  //store selected result in cache
                  await setBottombartitle(typeOfAccrodin.knowlegde.title);
                  setLoader(true)

                  const { response, actionType } = await dispatchInteraction(
                    fetchInteractionAction(typeOfAccrodin.knowlegde.value, {
                      customerUuid: get(profileReducer, `${activeData}.customerUuid`, ''),
                      requestId: parseInt(item.requestId),
                      moduleName: "KnowledgeBaseMobileApp"

                    })
                  );
                  console.log("intreaction data response    ", response)
                  setLoader(false)

                  const status = await handleInteligenceResponse(response, item, actionType)
                  console.log('response', status)



                }}
              />
            );
          }
          }
        />
      );
    }
  };

  const setDropDownFormField = (field, { code, description }) => {
    dispatchInteraction(
      setInteractionFormField({
        field,
        value: { code: code, description: description },
        clearError: true,
      })
    );
  };

  const setFormField = (field, value) => {
    dispatchInteraction(
      setInteractionFormField({
        field,
        value,
        clearError: false,
      })
    );
  };
  /**
  * Pre set the form's data before open the create interaction popup
  * @memberOf Interaction
  * @param  {Object} item form data 
  */
  const presetInteractionFormData = (item) => {
    try {
      const debuggg = true;
      if (debuggg) console.log('parmas interactionDataToCreateInt', item)

      const interCat = get(
        interactionCategoryList?.filter(
          (it) => it.code == item.intxnCategory
        ),
        "[0]",
        { code: "", description: "" }
      );
      if (debuggg) console.log('category', interCat)

      const interType = get(
        interactionList?.filter((it) => it.code == item.intxnType),
        "[0]",
        { code: "", description: "" }
      );
      if (debuggg) console.log('interType', interType)
      const serviveType = get(
        serviceTypelist?.filter((it) => it.code == item.serviceType),
        "[0]",
        { code: "", description: "" }
      );
      if (debuggg) console.log('serviveType', serviveType)

      const serviveCatType = get(
        serviceCategoryList?.filter(
          (it) => it.code == item.serviceCategory
        ),
        "[0]",
        { code: "", description: "" }
      );


      if (debuggg) console.log('serviveCatType', serviceCategoryList, serviveCatType)
      const prirtyCode = get(
        priorityList?.filter(
          (it) => it.code == item.priorityCode
        ),
        "[0]",
        { code: "", description: "" }
      );

      if (debuggg) console.log('prirtyCode', prirtyCode)
      //to do from api response
      //make array
      const contactPerferance = get(item, "contactPreference", [])

      const problemCause = get(
        problemList?.filter(
          (it) => it.code == item.intxnCause
        ),
        "[0]",
        { code: "", description: "" }
      );

      if (debuggg) console.log('prirtyList', problemList, "api response", item.intxnCause)

      console.log('master data parse from ', "interationcar", interCat, "interType",
        interType, "serviveType", serviveType, "serviveCatType", serviveCatType,
        "prirtyCode", prirtyCode, "contactPerferance", contactPerferance, "problemCause", problemCause)

      setDropDownFormField("priorityCode", prirtyCode);

      // setFormField("contactPerference", contactPerferance);

      setDropDownFormField("interactionCategory", interCat);

      setDropDownFormField("interactionType", interType);

      setDropDownFormField("serviceCategory", serviveCatType);

      setDropDownFormField("serviceType", serviveType);
      //problem cause
      //setDropDownFormField("problemCause", problemCause)


      if (!get(item, 'requestId', false) != false) {
        setFormField("statement", item.requestId);
      }
      if (get(item, 'statementId', false) != false) {
        setFormField("statementId", item.requestStatement);
      }

      return true
    } catch (error) {

      console.log("error in interactionTocreate", error);
      return false

    }
  };
  const handleAccodin = async ({ value, title }) => {
    await setactiveChatBot(value);
    await setBottombartitle(title);
    await setCreateInteractionType("")
    await dispatchInteraction(fetchInteractionAction(value));
    setOpenBottomModalChatBot(true);
  };
  /**
  * Handle the dropdown of (Top 10 Category,Recently inteaction)
  * @memberOf Interaction
  */
  const renderAccordin = useMemo(() => {
    return (
      &lt;View style={styles.accodinContainer}>
        &lt;Pressable
          style={styles.accodinItem}
          onPress={() => {
            handleAccodin(typeOfAccrodin.category);
          }}
        >
          &lt;Image
            source={require("../../Assets/icons/interaction_category.gif")}
            style={styles.gif}
          />
          &lt;Text style={styles.accordinTxt}>Top 10 Category&lt;/Text>
          &lt;Icon name="chevron-down" size={30} color={colors.accodinItem} />
        &lt;/Pressable>

        &lt;Pressable
          style={styles.accodinItem}
          onPress={() => handleAccodin(typeOfAccrodin.frequently)}
        >
          &lt;Image
            source={require("../../Assets/icons/interaction_fewq.gif")}
            style={styles.gif}
          />
          &lt;Text style={styles.accordinTxt}>Most frequent Interaction&lt;/Text>
          &lt;Icon name="chevron-down" size={30} color={colors.accodinItem} />
        &lt;/Pressable>
        &lt;Pressable
          style={styles.accodinItem}
          onPress={() => handleAccodin(typeOfAccrodin.rencently)}
        >
          &lt;Image
            source={require("../../Assets/icons/interaction_most_feq.gif")}
            style={styles.gif}
          />
          &lt;Text style={styles.accordinTxt}>Recently Interaction&lt;/Text>
          &lt;Icon name="chevron-down" size={30} color={colors.accodinItem} />
        &lt;/Pressable>
      &lt;/View>
    );
  }, []);


  const renderProfileTab = useMemo(() => {


    console.log("profile", profileReducer)
    const activeData = get(profileReducer, 'userSelectedProfileDetails.firstName', '') == '' ? "savedProfileData" : "userSelectedProfileDetails";
    console.log("profile active ", activeData)
    const addr = get(profileReducer, `${activeData}.customerAddress`, []);
    const mobilePath = userType == USERTYPE.CUSTOMER ? "customerContact[0].mobileNo" : "contactNo"
    const emailPath = userType == USERTYPE.CUSTOMER ? "customerContact[0].emailId" : "email"

    const customerCategoryPath = userType == USERTYPE.CUSTOMER ? "customerCatDesc.description" : "customerCatDesc.description"
    const customerStatusPath = userType == USERTYPE.CUSTOMER ? "statusDesc.description" : "statusDesc.description"
    const customerCategory = get(profileReducer, `${activeData}.${customerCategoryPath}`, "")
    const customerStatus = get(profileReducer, `${activeData}.${customerStatusPath}`, "")

    console.log("cutomer cat", customerCategory, customerStatus)

    return (
      &lt;ImageBackground
        source={require("../../Assets/icons/login_card_background.png")}
        // resizeMode="contain"
        style={{
          // margin: 5,
          zIndex: 999,
          paddingLeft: 20,
          paddingRight: 20,
          paddingBottom: 20,
          backgroundColor: "#ffff",
          borderRadius: 16,
          elevation: 1,
          borderColor:
            userType == USERTYPE.CUSTOMER ? "#0CD222" : colors.userTypeColor,
          borderWidth: 3,
        }}
      >
        &lt;View style={{ flexDirection: "column" }}>
          &lt;View style={{ flexDirection: "row-reverse" }}>

            &lt;View>
              &lt;ImageBackground
                source={require("../../Assets/icons/active_background.png")}
                resizeMode="cover"
                style={{ width: "100%" }}
              >
                &lt;Text
                  style={{
                    color: "white",
                    fontWeight: "bold",
                    textAlign: "center",
                    paddingLeft: 15,
                    paddingRight: 15,
                  }}
                >
                  {customerStatus}
                &lt;/Text>
              &lt;/ImageBackground>
            &lt;/View>
            {customerCategory != "" &amp;&amp;
              &lt;View>
                &lt;ImageBackground
                  source={require("../../Assets/icons/business_background.png")}
                  resizeMode="cover"
                  style={{ width: "100%" }}
                >
                  &lt;Text
                    style={{
                      color: "#cf4751",
                      fontWeight: "bold",
                      textAlign: "center",
                      paddingLeft: 18,
                      paddingRight: 18,
                    }}
                  >
                    {customerCategory}
                  &lt;/Text>
                &lt;/ImageBackground>
              &lt;/View>
            }

          &lt;/View>
          &lt;View style={{ flexDirection: "row", marginTop: 20 }}>
            &lt;View>
              &lt;Image
                source={{
                  uri: customerPic,
                }}
                // imageStyle={{ borderRadius: 60 }}
                style={{ height: 60, width: 60 }}
              />
            &lt;/View>
            &lt;View style={{ flexDirection: "column", marginLeft: 10 }}>
              &lt;Text
                variant="bodyMedium"
                style={{
                  fontWeight: "700",
                  color: colors.textColor,
                }}
              >
                {get(profileReducer, `${activeData}.firstName`, "")}{" "}
                {get(profileReducer, `${activeData}.lastName`, "")}
              &lt;/Text>
              &lt;Text
                variant="bodySmall"
                style={{
                  fontWeight: "400",
                  color: colors.textColor,
                }}
              >
                {get(profileReducer, `${activeData}.customerNo`, "")}
              &lt;/Text>
              &lt;Text
                variant="bodySmall"
                style={{
                  fontWeight: "400",
                  color: colors.textColor,
                }}
              >

                {get(
                  profileReducer,
                  `${activeData}.${emailPath}`,
                  ""
                )}
              &lt;/Text>
            &lt;/View>
          &lt;/View>
        &lt;/View>
        &lt;View style={{ marginTop: 10 }}>
          &lt;Image source={require("../../Assets/icons/line.png")} />
        &lt;/View>
        &lt;View
          style={{ flexDirection: "row", alignItems: "center", marginTop: 12 }}
        >
          &lt;Image
            source={require("../../Assets/icons/interaction_contact.png")}
            style={{ width: 45, height: 45 }}
          />
          &lt;Text
            variant="bodySmall"
            style={{
              fontWeight: "400",
              color: colors.textColor,
            }}
          >
            {get(
              profileReducer,
              `${activeData}.${mobilePath}`,
              ""
            )}
          &lt;/Text>
          {userType == USERTYPE.CUSTOMER &amp;&amp;
            &lt;Image
              source={require("../../Assets/icons/interaction_loc.png")}
              style={{ width: 45, height: 45 }}
            />

          }
          &lt;Text
            numberOfLines={4}
            variant="bodySmall"
            style={{
              fontWeight: "400",
              width: width * .4,
              flexWrap: "wrap",
              wordWrap: "break-word",
              color: colors.textColor,
            }}
          >


            {handleMultipleContact(addr)}
          &lt;/Text>
        &lt;/View>
        {serviceList.length > 0 &amp;&amp;
          &lt;Pressable
            onPress={() => {
              if (serviceList.length > 0) {
                setProfileSeriveModal(!modelProfileServiceModel);
              }
            }}
            style={{
              zIndex: 9,
              flexDirection: "row",
              width: "50%",
              alignItems: "center",
              marginTop: 5,
            }}
          >
            &lt;Image
              source={require("../../Assets/icons/interaction_service.png")}
              style={{ width: 45, height: 45 }}
            />
            &lt;Text
              variant="bodyMedium"
              style={{
                fontWeight: "400",
                color: colors.textColor,
                marginRight: 5,
              }}
            >
              Services : {activeService?.description}
            &lt;/Text>
            {serviceList.length > 0 &amp;&amp; (
              &lt;Icon
                name={!modelProfileServiceModel ? "chevron-down" : "chevron-up"}
                size={20}
                color={colors.textColor}
              />
            )}
          &lt;/Pressable>
        }

        {
          modelProfileServiceModel &amp;&amp; (
            &lt;>
              &lt;Pressable
                onPress={() => {
                  setProfileSeriveModal(false)
                }}
                style={{
                  backgroundColor: "transparent",
                  position: "absolute",
                  width: width,
                  height: height,

                }}>

              &lt;/Pressable>
              &lt;View style={styles.modelContainerProfile}>
                {serviceList.map((ite) => {
                  return (
                    &lt;List.Item
                      key={ite.code}
                      title={ite.description}
                      titleStyle={{
                        fontSize: 10,
                        padding: 0,
                        margin: 0,
                      }}

                      onPress={() => {
                        setService(ite);
                        setProfileSeriveModal(false);
                      }}
                      style={{ borderWidthColor: "gray", borderBottomWidth: 0.2 }}
                    />
                  );
                })}
              &lt;/View>
            &lt;/>
          )
        }
      &lt;/ImageBackground>
    );
  }, [
    addresss,
    customerPic,
    profileReducer,
    modelProfileServiceModel,
    userType,
    setService,
    activeService,
  ]);
  // console.log('new profile ', profileReducer.userSelectedProfileDetails)
  const {
    statement,
    interactionType,
    channel,
    problemCause,
    priorityCode,
    contactPerference,
    remarks,
    attachment,
    serviceType,
    interactionCategory,
    serviceCategory,
  } = interactionRedux.formData;

  const { loaderAdd } = interactionRedux;

  let isButtonEnable = true;

  //handling loader
  const HandleMultipleCaseInChatBoard = ({ suggestionList, resolutionHistory = [] }) => {
    //product list
    console.log('HandleMultipleCaseInChatBoard suggestion list ', suggestionList)
    console.log('HandleMultipleCaseInChatBoard :createInteractionType', createInteractionType)
    if (createInteractionType != INTELIGENCE_STATUS.PRODUCT_WITH_MULTIPLE_ITEM) {
      console.log('HandleMultipleCaseInChatBoard :suggestion list', suggestionList)
      return (
        &lt;View style={styles.bottomContainer}>
          &lt;ClearSpace size={2} />
          &lt;View style={{ flexDirection: "row", flexWrap: "wrap" }}>
            {get(suggestionList, 'length', 0) > 0 ? (
              suggestionList.map((ite) => (
                // eslint-disable-next-line react/jsx-key
                &lt;Chip
                  mode="outlined"
                  onPress={async () => {
                    // await setBottombartitle(typeOfAccrodin.knowlegde.title);
                    setOpenBottomModalChatBot(false);
                    setLoader(true)
                    const activeData = get(profileReducer, 'userSelectedProfileDetails.customerUuid', '') == '' ? "savedProfileData" : "userSelectedProfileDetails";

                    console.log("ddfdf", {
                      customerUuid: get(profileReducer, `${activeData}.customerUuid`, ''),
                      requestId: ite
                    })
                    const { response, actionType } = await dispatchInteraction(
                      fetchInteractionAction(typeOfAccrodin.knowlegde.value, {
                        customerUuid: get(profileReducer, `${activeData}.customerUuid`, ''),
                        requestId: parseInt(ite.requestId),
                        moduleName: "KnowledgeBaseMobileApp"

                      })
                    );
                    setLoader(false)
                    const status = await handleInteligenceResponse(response, ite, actionType)
                    console.log('view->HandleMultipleCaseInChatBoard->api response ', response, actionType)
                    // const status = await handleInteligenceResponse(mockresponse, item)
                  }}
                  textStyle={{
                    fontSize: 14,
                    fontWeight: "400",
                  }}
                  style={{
                    backgroundColor: "#edf1f7",
                    borderRadius: 15,
                    marginRight: 5,
                    marginBottom: 5,
                    borderColor: "transparent",
                  }}
                >
                  {ite.requestStatement}
                &lt;/Chip>
              ))
            ) : (
              &lt;View style={{ flex: 1 }}>
                &lt;Text style={{ textAlign: "center" }} variant="labelMedium">
                  No data available!
                &lt;/Text>
              &lt;/View>
            )}
          &lt;/View>
          &lt;ClearSpace size={3} />

          {/* &lt;Text variant="labelMedium" style={{ textAlign: "center" }}>
            Couldn't Find a resolution?
            &lt;Text onPress={() => { }} style={{ color: "red" }}>
              {" "}
              Create Interaction
            &lt;/Text>{" "}
          &lt;/Text> */}
        &lt;/View>
      )
    }
    else {
      return (
        &lt;View style={styles.bottomContainer}>
          &lt;ClearSpace size={2} />
          &lt;View style={{ flexDirection: "row", flexWrap: "wrap" }}>
            {get(suggestionList, 'resolutionAction.data.length', 0) > 0 ? (
              get(suggestionList, 'resolutionAction.data').map((ite) => (
                // eslint-disable-next-line react/jsx-key
                &lt;Chip
                  mode="outlined"
                  onPress={async () => {
                    setLoader(true)

                    const activeData = get(profileReducer, 'userSelectedProfileDetails.customerUuid', '') == '' ? "savedProfileData" : "userSelectedProfileDetails";
                    const { response, actionType } = await dispatchInteraction(
                      fetchInteractionAction(typeOfAccrodin.knowlegde.value, {
                        customerUuid: get(profileReducer, `${activeData}.customerUuid`, ''),
                        requestId: parseInt(get(ite, "requestId", ""))
                      })
                    );
                    setLoader(false)
                    const status = await handleInteligenceResponse(response, ite, actionType)

                    console.log('response', status)
                    return null
                    console.log('view->HandleMultipleCaseInChatBoard->api response ', response, actionType)
                    // const status = await handleInteligenceResponse(mockresponse, item)
                  }}
                  textStyle={{
                    fontSize: 14,
                    fontWeight: "400",
                  }}
                  style={{
                    backgroundColor: "#edf1f7",
                    borderRadius: 15,
                    marginRight: 5,
                    marginBottom: 5,
                    borderColor: "transparent",
                  }}
                >
                  {ite.serviceName}
                &lt;/Chip>
              ))
            ) : (
              &lt;View style={{ flex: 1 }}>
                &lt;Text style={{ textAlign: "center" }} variant="labelMedium">
                  No data available!
                &lt;/Text>
              &lt;/View>
            )}
          &lt;/View>
          &lt;ClearSpace size={3} />

          {/* &lt;Text variant="labelMedium" style={{ textAlign: "center" }}>
            Couldn't Find a resolution?
            &lt;Text onPress={() => { }} style={{ color: "red" }}>
              {" "}
              Create Interaction
            &lt;/Text>{" "}
          &lt;/Text> */}
        &lt;/View>
      )
    }
  }
  /**
   * render bottom chat
   *
   */
  const RenderBottomChatBoard = () => {
    const suggestionList = get(interactionReducer, "knowledgeHistory", []);

    console.log('RenderBottomChatBoard,', createInteractionType, activeChatBotSec)
    //todo

    if (activeChatBotSec == "") {
      console.log("setactiveChatBot not set for title for chat bot");
      return null;
    }

    if (createInteractionType == INTELIGENCE_STATUS.RESOVLED) {


      const activeData = get(profileReducer, 'userSelectedProfileDetails.customerUuid', '') == '' ? "savedProfileData" : "userSelectedProfileDetails";

      // console.log('resolution RenderBottomChatBoard resolved', suggestionList)
      return (
        &lt;HandleResolution
          customerUuid={get(profileReducer, `${activeData}.customerUuid`, '')}
          popupAction={async (params) => {
            setLoader(true)
            console.log("htting popupAction", params)
            await dispatchInteraction(
              fetchInteractionAction(typeOfAccrodin.workflow.value, params, true)
            );
            setLoader(false);
          }}
          suggestionList={suggestionList}
          resolutionDetails={get(interactionReducer, "InteractionData", [])}
          navigation={navigation}
        />
      );

    }
    const interactionList = get(interactionReducer, 'InteractionData', [])

    return (
      &lt;HandleMultipleCaseInChatBoard
        suggestionList={interactionList}
        resolutionHistory={suggestionList}
      />
    );
  };
  if (openBottomModal) {
    Object.keys(interactionRedux.formData).map((it) => {
      const item = interactionRedux.formData[it];
      if (item.type == INPUT_TYPE.INPUTBOX &amp;&amp; item.required) {
        if (item.value == "") {
          isButtonEnable = false
        }
      }
      if (item.type == INPUT_TYPE.DROPDOWN &amp;&amp; item.required) {
        if (item.value.code == "") {
          isButtonEnable == false
        }
      }
      if (item.type == INPUT_TYPE.ARRAY &amp;&amp; item.required) {
        if (item.value?.length != 0) {
          const data = item.value.filter(item => item.active == true)
          console.log(":123data", data, data.length)
          if (data?.length == 0) isButtonEnable = false;

        }
        else {
          isButtonEnable == false
        }
      }


    });
  }


  const isModelOpen =
    openBottomModal || openBottomModalChatBoard || userSeachEnable;


  return (
    &lt;>
      {(enableSuccessScreen == interactionResponseScreen.FAILED) &amp;&amp;

        &lt;View style={{ ...commonStyle.center, flex: 1, position: "relative", backgroundColor: "red", top: '50%', marginBottom: 1000 }}>
          &lt;InteractionFailed
            okHandler={() => {
              //Failed action
              resetReducerNdState();
            }}
          />
        &lt;/View>
      }

      {(enableSuccessScreen == interactionResponseScreen.SUCCESS) &amp;&amp;

        &lt;View style={{ ...commonStyle.center, flex: 1, position: "relative", backgroundColor: "red", top: '50%', marginBottom: 1000 }}>
          &lt;InteractionSuccess
            intxId={intereactionAddResponse?.intxnNo}
            cancelButtonRequired={true}
            okHandler={async () => {
              await resetStateData("setInteractionResponse");
              console.log("hiting", intereactionAddResponse)

              navigation.navigate(STACK_INTERACTION_DETAILS, {
                interactionID: intereactionAddResponse?.intxnId,
              });
            }}
            cancelHandler={async () => {
              await resetStateData("setInteractionResponse");
              setEnableSuccessScreen(interactionResponseScreen.NONE)
            }}
          />
        &lt;/View>

      }
      {/* {(enableSuccessScreen == interactionResponseScreen.EMPTY_CUSTOMER) &amp;&amp;
        &lt;View style={{ ...commonStyle.center, flex: 1, margin: 10 }}>
          &lt;InteractionSuccess
            intxId={intereactionAddResponse?.intxnNo}
            cancelButtonRequired={true}
            okHandler={async () => {
              await resetStateData("setInteractionResponse");
              navigation.navigate(STACK_CREATE_CUSTOMER, {
                interactionID: intereactionAddResponse?.intxnNo,
              });
            }}
            cancelHandler={() => { }}
          />
        &lt;/View>
      } */}

      {
        profileReducer.IsSearchEmpty &amp;&amp;
        &lt;View style={{
          ...modalStyle.successContainer,
          height,
          top: 30,
          width,
          zIndex: 99999,
          position: "absolute"
        }}>
          &lt;Image
            source={require("../../Assets/icons/no_customer.gif")}
            style={modalStyle.gif}
          />
          &lt;Text style={modalStyle.interactionText}>
            Provided details doesn’t match any customer kindly go ahead and search
          &lt;/Text>

        &lt;/View>
      }
      {
        userType == USERTYPE.USER &amp;&amp;
        useMemo(() => {
          return userNavigationIcon({
            navigation,
            setOpenBottomModal: setOpenBottomModal,
            setSearchOpen: setSearchOpen,
            setEnableSuccessScreens: () => {
              //to do when user search is empty
              {/* setEnableSuccessScreen(interactionResponseScreen.EMPTY_CUSTOMER) */ }
            },
            setLoader,
            profileDispatch,
            headerRightForNav,
            headerTitle: "Interaction",
            profileSearchData: get(profileReducer, "profileSearchData", [])
          });
        }, [setSearchOpen, setOpenBottomModal, userSeachEnable, headerRightForNav, setLoader, navigation, profileDispatch, setEnableSuccessScreen, userType])

      }
      {
        userType == USERTYPE.USER &amp;&amp;
        useMemo(() => {
          return (
            &lt;RenderUserSelectResult
              profileSearchData={get(profileReducer, "profileSearchData", [])}
              setLoader={setLoader}
              setUserSeachEnable={setUserSeachEnable}
              SearchModelisOpen={SearchModelisOpen}
              setSearchOpen={setSearchOpen}
              profileDispatch={profileDispatch}
              headerRightForNav={headerRightForNav}
              headerTitle={"Interaction"}
              navigation={navigation}
            />
          );
        }, [
          userType,
          profileReducer,
          setLoader,
          setUserType,
          profileDispatch,
          navigation,
          userSeachEnable,
          headerRightForNav,
        ])
      }
      {appoimentPopUp &amp;&amp; &lt;AppointmentPop
        appointList={appointList}
        formData={appoinmentFormData}
        locationList={locationList}
        setAppoinmentPopup={setAppoinmentPopup}
      />}
      {
        loader &amp;&amp; (
          &lt;LoadingAnimation title="while we are creating Interaction." />
        )
      }
      {
        interactionReducer.initInteraction &amp;&amp; (
          &lt;LoadingAnimation title="fetch data" />
        )
      }
      &lt;ScrollView contentContainerStyle={{ flexGrow: 1 }}>
        &lt;View
          style={{
            ...styles.container,
            backgroundColor: isModelOpen ? "gray" : "#F0F0F0",
            opacity: isModelOpen ? userSeachEnable ? 0 : 0.3 : 1,
          }}
        >

          {/* profile card */}
          {renderProfileTab}

          &lt;ClearSpace size={2} />

          &lt;View style={{ alignSelf: "flex-end", flexDirection: "row" }}>
            &lt;Text variant="bodyMedium">
              Smart Assistance
            &lt;/Text>
            &lt;Switch

              onValueChange={(status) => {
                setSmartAssistance(status)

              }}
              value={isEnabledsmartAssist}
            />
          &lt;/View>



          &lt;Text variant="bodyMedium">Type your statement here&lt;/Text>

          &lt;View style={styles.searchSection}>
            &lt;TextInput
              style={styles.input}
              onFocus={() => setsearchStandaloneModel(false)}
              value={knowledgeSearchText}
              placeholder="ex. Biiling problem"
              onChangeText={onChangeKnowledgeSearchText}
              underlineColorAndroid="transparent"
            />
            {knowledgeSearchText &amp;&amp; (
              &lt;Pressable
                onPress={() => {
                  setKnowledgeSearchText(false);
                  setsearchStandaloneModel(true);
                  //open form model
                  setautoSuggestionList(false);
                  Keyboard.dismiss();
                  resetCreateInterationForm()
                }}
              >
                &lt;Icon
                  style={styles.searchIcon}
                  name="close"
                  size={30}
                  color={"#C7CAD1"}
                />
              &lt;/Pressable>
            )}
          &lt;/View>




          {searchStandAloneModal &amp;&amp; (
            &lt;>
              &lt;ClearSpace size={5} />
              &lt;Text variant="bodyMedium">More for you&lt;/Text>
              &lt;ClearSpace size={2} />
              {renderAccordin}
            &lt;/>
          )}
          &lt;RenderSearchResult />

          {/* search box end */}
          {/*knowledge search*/}
        &lt;/View>
      &lt;/ScrollView>
      &lt;FooterModel
        open={openBottomModalChatBoard}
        setOpen={setOpenBottomModalChatBot}
        title={`${bottomBarTitle} ${isSolutionFound ? "- Solution Found" : ""}`}
      >
        &lt;RenderBottomChatBoard />
      &lt;/FooterModel>

      &lt;FooterModel
        open={openBottomModal}
        setOpen={setOpenBottomModal}
        title={bottomBarTitle}>
        &lt;ScrollView contentContainerStyle={{ flex: 1 }} nestedScrollEnabled={true}>

          {/* Field View */}
          &lt;View style={{ marginHorizontal: 10 }}>
            {(createInteractionType !== INTELIGENCE_STATUS.CREATE_INTERACTION_AUTO) &amp;&amp;
              &lt;>
                &lt;CustomDropDownFullWidth
                  selectedValue={get(
                    interactionCategory,
                    "value.description",
                    ""
                  )}
                  data={interactionCategoryList}
                  onChangeText={(text) => {
                    dispatchInteraction(
                      setInteractionFormField({
                        field: "interactionCategory",
                        value: text,
                        clearError: true,
                      })
                    );
                  }}
                  value={get(interactionCategory, "value.code", "")}
                  caption={"Interaction Category"}
                  placeHolder={"Select interaction category"}
                />

                {interactionCategory.error &amp;&amp;
                  showErrorMessage(interactionCategory.error)}

                &lt;CustomDropDownFullWidth
                  selectedValue={get(interactionType, "value.description", "")}
                  data={interactionList}
                  onChangeText={(text) => {
                    dispatchInteraction(
                      setInteractionFormField({
                        field: "interactionType",
                        value: text,
                        clearError: true,
                      })
                    );
                  }}
                  value={get(interactionType, "value.code", "")}
                  caption={strings.intractionType}
                  placeHolder={"Select " + strings.intractionType}
                />

                {interactionType.error &amp;&amp; showErrorMessage(interactionType.error)}

                &lt;CustomDropDownFullWidth
                  selectedValue={get(serviceType, "value.description", "")}
                  data={serviceTypelist}
                  onChangeText={(text) => {
                    dispatchInteraction(
                      setInteractionFormField({
                        field: "serviceType",
                        value: text,
                        clearError: true,
                      })
                    );
                  }}
                  value={get(serviceType, "value.code", "")}
                  caption={strings.serviceType}
                  placeHolder={"Select " + strings.serviceType}
                />
                {serviceTypelist.error &amp;&amp; showErrorMessage(serviceTypelist.error)}



                &lt;CustomDropDownFullWidth
                  selectedValue={get(serviceCategory, "value.description", "")}
                  data={serviceCategoryList}
                  onChangeText={(text) => {
                    dispatchInteraction(
                      setInteractionFormField({
                        field: "serviceCategory",
                        value: text,
                        clearError: true,
                      })
                    );
                  }}
                  value={get(serviceCategory, "value.code", "")}
                  caption={"Serive Category"}
                  placeHolder={"Select Serive Category"}
                />
                {serviceCategory.error &amp;&amp; showErrorMessage(serviceCategory.error)}
                {/* problem cause */}
                {/* &lt;CustomDropDownFullWidth
                    selectedValue={get(problemCause, "value.description", "")}
                    data={problemList}
                    onChangeText={(text) => {
                      dispatchInteraction(
                        setInteractionFormField({
                          field: "problemCause",
                          value: text,
                          clearError: true,
                        })
                      );
                    }}
                    value={get(problemCause, "value.code", "")}
                    caption={strings.problem_stat_cause}
                    placeHolder={"Select " + strings.problem_stat_cause}
                  /> */}
                {problemCause.error &amp;&amp; showErrorMessage(problemCause.error)}

                &lt;CustomDropDownFullWidth
                  selectedValue={get(priorityCode, "value.description", "")}
                  data={priorityList}
                  onChangeText={(text) => {
                    dispatchInteraction(
                      setInteractionFormField({
                        field: "priorityCode",
                        value: text,
                        clearError: true,
                      })
                    );
                  }}
                  value={get(priorityCode, "value.code", "")}
                  caption={strings.priority_type}
                  placeHolder={"Select " + strings.priority_type}
                />

                {contactTypeList.length != 0 &amp;&amp; (
                  &lt;View style={{ marginTop: 10 }}>
                    &lt;CheckGroupbox
                      data={contactTypeList.map((ite) => {
                        return {
                          code: ite.code,
                          description: ite.description,
                          active: false,
                        }
                      })
                      }
                      values={get(contactPerference, "value", "")}
                      setValues={(data) => {
                        setFormField("contactPerference", data);

                      }}
                      label="Contact Preference"
                    />
                  &lt;/View>
                )}

              &lt;/>
            }
            &lt;CustomInput
              value={get(remarks, "value", "")}
              caption={strings.remarks}
              placeHolder={strings.remarks}
              onChangeText={(text) => {
                dispatchInteraction(
                  setInteractionFormField({
                    field: "remarks",
                    value: text,
                    clearError: true,
                  })
                );
              }}
              right={
                &lt;TextInput.Icon
                  onPress={() => {
                    dispatchInteraction(
                      setInteractionFormField({
                        field: "remarks",
                        value: "",
                        clearError: false,
                      })
                    );
                  }}
                  style={{ width: 23, height: 23 }}
                  icon={require("../../Assets/icons/ic_close.png")}
                />
              }
            />

            {remarks.error &amp;&amp; showErrorMessage(remarks.error)}
            {(createInteractionType !== INTELIGENCE_STATUS.CREATE_INTERACTION_AUTO) &amp;&amp;

              &lt;ImagePicker
                attachmentModalVisible={attachmentModalVisible}
                setAttachmentModalVisible={setAttachmentModalVisible}
                fileAttachments={fileAttachments}
                setFileAttachments={setFileAttachments}
              />
            }
            {/* &lt;/KeyboardAwareView> */}
            {/* &lt;CustomInput
            value={attachment.value}
            caption={strings.attachment}
            placeHolder={strings.attachment}
            onChangeText={(text) => {
              dispatchInteraction(
                setInteractionFormField({
                  field: "attachment",
                  value: text,
                  clearError: true,
                })
              );
            }}
          /> */}
          &lt;/View>
          {/* {attachment.error &amp;&amp; showErrorMessage(attachment.error)} */}
          {/* Bottom Button View */}
          &lt;View
            style={{
              flexDirection: "row",
              backgroundColor: "white",
              marginHorizontal: 15,
              marginBottom: 20,
            }}
          >
            &lt;View style={{ flex: 1 }}>
              &lt;CustomButton
                label={strings.cancel}
                onPress={() => {
                  setOpenBottomModal(false);
                  dispatchInteraction(setInteractionReset());
                }}
              />
            &lt;/View>

            &lt;View style={{ flex: 1 }}>
              &lt;CustomButton
                isDisabled={!isButtonEnable}
                // isDisabled={false}
                loading={loaderAdd}
                label={strings.submit}
                onPress={async () => {

                  const input = interactionRedux.formData;

                  const logg = true
                  if (logg) console.log('create complienta :entered', interactionRedux)
                  const activeData = get(profileReducer, 'userSelectedProfileDetails.firstName', '') == '' ? "savedProfileData" : "userSelectedProfileDetails";
                  const customerID = get(profileReducer, `${activeData}.customerId`, "");
                  if (customerID == "") console.log("cusomter id is empty");


                  if (logg) console.log('create complienta :customer id', customerID)
                  if (logg) console.log('create complienta :input', input)
                  const profileInfo = get(profileReducer, `${activeData}.customerAddress[0]`, "");
                  console.log("profile info", profileInfo)
                  const params = {
                    customerId: customerID,

                    // statement: input.statement.value,
                    // statementId: input.statementId.value,
                    //problem cause
                    // problemCause: input.problemCause.value?.code,
                    interactionCategory:
                      input.interactionCategory.value?.code,
                    serviceCategory: input.serviceCategory.value?.code,
                    interactionType: input.interactionType.value?.code,
                    serviceType: input.serviceType.value?.code,
                    channel: "MOBILEAPP",
                    priorityCode: input.priorityCode.value?.code,
                    contactPreference: input.contactPerference.value.filter(it => it.active == true).map(item => item.code),
                    remarks: input.remarks.value,
                    statement: get(activeState, 'requestStatement', ''),
                    statementId: get(activeState, 'requestId', ''),
                    appointAddress: {
                      address1: profileInfo.address1,
                      address2: profileInfo.address2,
                      address3: profileInfo.address3,
                      city: profileInfo.city,
                      state: profileInfo.state,
                      district: profileInfo.district,
                      postcode: profileInfo.postcode,
                      country: profileInfo.country,
                    }
                  };
                  console.log("params", params)

                  const templeAPIPayload = {
                    mapCategory: "TMC_INTERACTION",
                    serviceCategory: input.serviceCategory.value?.code,
                    serviceType: input.serviceType.value?.code,
                    customerCategory: "REG",
                    tranType: input.interactionType.value?.code, //interaction type
                    tranCategory: input.interactionCategory.value?.code, //inteaction cateogy
                    tranPriority: input.priorityCode.value?.code,
                    // "mapCategory": "TMC_INTERACTION",
                    // "serviceCategory": "PST_LOANS",
                    // "serviceType": "ST_BANK",
                    // "customerCategory": "REG",
                    // "tranType": "REQUEST",
                    // "tranCategory": "ACCOUNT_RELATED",
                    // "tranPriority": "PRTYHGH"
                  }
                  console.log("appointment templte", templeAPIPayload)
                  // console.log("payload", templeAPIPayload)
                  const appoinTemplete = await dispatchInteraction(getAppoinmentsData(templeAPIPayload));
                  console.log("templete view response ", appoinTemplete)
                  if (appoinTemplete != false) {
                    //for reference
                    setAppoinmentFormData({ ...params, templateId: appoinTemplete, productNo: activeService.productNo })
                    setAppoinmentPopup(true)
                    return;
                  }

                  if (logg) console.log('create complienta :create obj', params)


                  const { status, response } = await dispatchInteraction(
                    addInteractionAction(params, fileAttachments)
                  );
                  if (logg) console.log('create complienta :create obj', params)
                  console.log("interaction type response ", response);

                  if (status) {
                    setInteractionResponse(response);
                    setOpenBottomModal(false)
                    setEnableSuccessScreen(interactionResponseScreen.SUCCESS);
                    dispatchInteraction(setInteractionReset());

                  } else {

                    // setEnableSuccessScreen(interactionResponseScreen.FAILED);
                  }
                }}
              />
            &lt;/View>
          &lt;/View>

        &lt;/ScrollView>
      &lt;/FooterModel>

    &lt;/>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    padding: 10,
    backgroundColor: "#F0F0F0",
    marginTop: 60,
  },
  dot: {
    backgroundColor: "#F5AD47",
    width: 6,
    height: 6,
    borderRadius: 6,
    marginRight: 5,
  },
  fullspace: {
    flex: 1,
  },
  modalContainer: {
    flex: 1,
    padding: 10,
  },
  triangleCorner: {
    width: 0,
    height: 0,
    backgroundColor: "white",
    borderRightColor: color.BCAE_PRIMARY,
    borderRightWidth: 400,
    borderTopWidth: 200,
    borderTopColor: "white",
  },

  highlightText: {
    color: "#202223",
    textAlign: "left",
    fontSize: fontSizes.FONT_19 * 2,
    fontWeight: "600",
    lineHeight: spacing.HEIGHT_27 * 2,
  },
  searchSection: {

    padding: 5,
    paddingLeft: 10,
    flexDirection: "row",
    justifyContent: "center",
    alignItems: "center",
    backgroundColor: "#fff",
    borderRadius: 10,
    marginTop: 10,

  },
  searchIcon: {
    padding: 10,
  },
  input: {
    flex: 1,
    paddingTop: 10,
    paddingRight: 10,
    paddingBottom: 10,
    paddingLeft: 0,
    backgroundColor: "#fff",
    color: "#424242",

  },
  dropDownCard: {
    // shadowColor: '#171717',
    maxHeight: spacing.HEIGHT_50 * 5,
    paddingTop: 10,
    width: "100%",
    marginVertical: spacing.WIDTH_10,
    elevation: 3,
  },
  accodinContainer: {
    backgroundColor: theme.colors.background,
    borderRadius: 5,
    alignItems: "center",
    elevation: 1,
  },
  accodinItem: {
    flexDirection: "row",
    marginHorizontal: 8,
    paddingVertical: 10,
    alignItems: "center",
    borderBottomColor: theme.colors.gray,
    borderBottomWidth: 0.5,
  },
  accordinTxt: {
    flex: 0.8,
    fontWeight: "500",
  },
  accordinImg: {
    flex: 0.1,
  },
  accordinIcon: {
    flex: 0.1,
  },
  bottomContainer: {
    paddingHorizontal: 10,
  },
  gif: {
    width: 30,
    height: 30,
    flex: 0.1,
    marginRight: 8,
  },
  modelContainerProfile: {
    zIndex: 99999999,
    position: "absolute",
    backgroundColor: "#fff",
    elevation: 1,
    width: 200,
    borderRadius: 3,
    // minHeight: 100,
    bottom: -60,
    left: 40,
  },
});

export default InteractionsToOrder;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="CustomerOnBoarding.html">CustomerOnBoarding</a></li><li><a href="EditProfile.html">EditProfile</a></li><li><a href="ForgotPassword.html">ForgotPassword</a></li><li><a href="Interaction.html">Interaction</a></li><li><a href="Login.html">Login</a></li><li><a href="Register.html">Register</a></li><li><a href="Splash.html">Splash</a></li><li><a href="ViewProfile.html">ViewProfile</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CheckGroupbox">CheckGroupbox</a></li><li><a href="global.html#CustomActivityIndicator">CustomActivityIndicator</a></li><li><a href="global.html#CustomButton">CustomButton</a></li><li><a href="global.html#CustomDropDown">CustomDropDown</a></li><li><a href="global.html#CustomDropDownFullWidth">CustomDropDownFullWidth</a></li><li><a href="global.html#CustomErrorText">CustomErrorText</a></li><li><a href="global.html#CustomInput">CustomInput</a></li><li><a href="global.html#FooterModel">FooterModel</a></li><li><a href="global.html#ImagePicker">ImagePicker</a></li><li><a href="global.html#ShareDoc">ShareDoc</a></li><li><a href="global.html#StickyFooter">StickyFooter</a></li><li><a href="global.html#TextBoxWithCTA">TextBoxWithCTA</a></li><li><a href="global.html#TextBoxWithCTAEmail">TextBoxWithCTAEmail</a></li><li><a href="global.html#ToastTemplete">ToastTemplete</a></li><li><a href="global.html#ToggleButton">ToggleButton</a></li><li><a href="global.html#downloadFile">downloadFile</a></li><li><a href="global.html#getCustomerID">getCustomerID</a></li><li><a href="global.html#getCustomerUUID">getCustomerUUID</a></li><li><a href="global.html#getFcmDeviceId">getFcmDeviceId</a></li><li><a href="global.html#getUserId">getUserId</a></li><li><a href="global.html#getUserType">getUserType</a></li><li><a href="global.html#notificationListener">notificationListener</a></li><li><a href="global.html#permission">permission</a></li><li><a href="global.html#requestUserPermission">requestUserPermission</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Jul 28 2023 12:06:28 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
